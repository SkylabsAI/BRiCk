<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
-- Copyright (c) 2020 BlueRock Security, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="../../css/coqdocjs/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="../../css/coqdocjs/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../js/coqdocjs/config.js"></script>
<script type="text/javascript" src="../../js/coqdocjs/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <!-- NOTE: These are displayed right to left on the page -->
    <span class="right">
      <a href="./indexpage.html"> Index for the theory </a>
      <a href="./toc.html"> Table of contents for the theory </a>
      <a href="../../../index.html"> Toplevel </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">bluerock.iris.extra.wp_io.wp_io_compose</h1>

<div class="code">
<span class="comment">(*<br/>
&nbsp;*&nbsp;Copyright&nbsp;(c)&nbsp;2023&nbsp;BlueRock&nbsp;Security,&nbsp;Inc.<br/>
&nbsp;*<br/>
&nbsp;*&nbsp;This&nbsp;software&nbsp;is&nbsp;distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;BedRock&nbsp;Open-Source&nbsp;License.<br/>
&nbsp;*&nbsp;See&nbsp;the&nbsp;LICENSE-BedRock&nbsp;file&nbsp;in&nbsp;the&nbsp;repository&nbsp;root&nbsp;for&nbsp;details.<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab97"></a><h1 class="section">General decomposition of a WPio for the Compose language into WPio's of</h1>

its components.

<div class="paragraph"> </div>

The main theorem is <span class="inlinecode"><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.wp_io_decompose"><span class="id" title="lemma">wp_io_decompose</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#"><span class="id" title="library">stdpp.namespaces</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bluerock.prelude.list</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="bluerock.iris.extra.bi.spec.exclusive.html#"><span class="id" title="library">bluerock.iris.extra.bi.spec.exclusive</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="bluerock.iris.extra.bi.spec.frac_splittable.html#"><span class="id" title="library">bluerock.iris.extra.bi.spec.frac_splittable</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="bluerock.iris.extra.bi.spec.knowledge.html#"><span class="id" title="library">bluerock.iris.extra.bi.spec.knowledge</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="bluerock.iris.extra.bi.spec.nary_classes.html#"><span class="id" title="library">bluerock.iris.extra.bi.spec.nary_classes</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bluerock.iris.extra.bi.prop_constraints.html#"><span class="id" title="library">bluerock.iris.extra.bi.prop_constraints</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bluerock.iris.extra.bi.big_op.html#"><span class="id" title="library">bluerock.iris.extra.bi.big_op</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#"><span class="id" title="library">bluerock.iris.extra.wp_io.inout_weakestpre</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#"><span class="id" title="library">bluerock.iris.extra.wp_io.lang</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bluerock.iris.extra.bi.observe.html#"><span class="id" title="library">bluerock.iris.extra.bi.observe</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bluerock.iris.extra.bi.only_provable.html#"><span class="id" title="library">bluerock.iris.extra.bi.only_provable</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bluerock.iris.extra.bi.own.html#"><span class="id" title="library">bluerock.iris.extra.bi.own</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.tactics.html#"><span class="id" title="library">iris.proofmode.tactics</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="wp_compose" class="idref" href="#wp_compose"><span class="id" title="module">wp_compose</span></a>.<br/>
<span class="id" title="keyword">Section</span> <a id="wp_compose.with_config" class="idref" href="#wp_compose.with_config"><span class="id" title="section">with_config</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="wp_compose.with_config.cfg" class="idref" href="#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.config"><span class="id" title="record">Compose.config</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="bc705b45a890839a9cbd7b1bd0077a1c" class="idref" href="#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a> := <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.lts_lang"><span class="id" title="definition">Compose.lts_lang</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="wp_compose.with_config.NAMES" class="idref" href="#wp_compose.with_config.NAMES"><span class="id" title="variable">NAMES</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gset"><span class="id" title="definition">gset</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">Compose.name</span></a>) := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#list_to_set"><span class="id" title="definition">list_to_set</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">Compose.name</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="wp_compose.traceR" class="idref" href="#wp_compose.traceR"><span class="id" title="abbreviation">traceR</span></a> := (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#agreeR"><span class="id" title="definition">agreeR</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#observation"><span class="id" title="projection">observation</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a>)))).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="26ab1479cbb639b25c927b8a36fd9e6f" class="idref" href="#26ab1479cbb639b25c927b8a36fd9e6f"><span class="id" title="definition">composeΣ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gFunctors"><span class="id" title="record">gFunctors</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#8ed86267cb76025deed5ef60f2c33991"><span class="id" title="notation">#[</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#GFunctor"><span class="id" title="constructor">GFunctor</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.traceR"><span class="id" title="abbreviation">traceR</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#8ed86267cb76025deed5ef60f2c33991"><span class="id" title="notation">]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="wp_compose.preG" class="idref" href="#wp_compose.preG"><span class="id" title="record">preG</span></a> <a id="ebf069dbc779b42a15c441a6d39d5f83" class="idref" href="#ebf069dbc779b42a15c441a6d39d5f83"><span class="id" title="binder">Σ</span></a> := <span class="id" title="var">mkPreG</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_compose.traceG" class="idref" href="#wp_compose.traceG"><span class="id" title="projection">traceG</span></a>  : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#inG"><span class="id" title="class">inG</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#ebf069dbc779b42a15c441a6d39d5f83"><span class="id" title="variable">Σ</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.traceR"><span class="id" title="abbreviation">traceR</span></a> ;<br/>
&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_compose.subG_preG" class="idref" href="#wp_compose.subG_preG"><span class="id" title="instance">subG_preG</span></a> {<a id="48bbc240c70629f9166b6605559525f0" class="idref" href="#48bbc240c70629f9166b6605559525f0"><span class="id" title="binder">Σ</span></a>} : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#subG"><span class="id" title="class">subG</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#26ab1479cbb639b25c927b8a36fd9e6f"><span class="id" title="definition">composeΣ</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#48bbc240c70629f9166b6605559525f0"><span class="id" title="variable">Σ</span></a> <span class="id" title="notation">→</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.preG"><span class="id" title="class">preG</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#48bbc240c70629f9166b6605559525f0"><span class="id" title="variable">Σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_inG</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="wp_compose.gen_preG" class="idref" href="#wp_compose.gen_preG"><span class="id" title="record">gen_preG</span></a> (<a id="PROP:6" class="idref" href="#PROP:6"><span class="id" title="binder">PROP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi"><span class="id" title="record">bi</span></a>) `{<a id="Ghostly0:7" class="idref" href="#Ghostly0:7"><span class="id" title="binder">!</span></a><a id="Ghostly0:7" class="idref" href="#Ghostly0:7"><span class="id" title="binder">Ghostly</span></a> <a id="Ghostly0:7" class="idref" href="#Ghostly0:7"><span class="id" title="binder">PROP</span></a>} := <span class="id" title="var">mkGenPreG</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_compose.gen_traceG" class="idref" href="#wp_compose.gen_traceG"><span class="id" title="projection">gen_traceG</span></a>  : <a class="idref" href="bluerock.iris.extra.bi.prop_constraints.html#HasUsualOwn"><span class="id" title="class">HasUsualOwn</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#PROP:6"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.traceR"><span class="id" title="abbreviation">traceR</span></a> ;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="wp_compose.G" class="idref" href="#wp_compose.G"><span class="id" title="record">G</span></a> (<a id="PROP:10" class="idref" href="#PROP:10"><span class="id" title="binder">PROP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi"><span class="id" title="record">bi</span></a>) `{<a id="Ghostly0:11" class="idref" href="#Ghostly0:11"><span class="id" title="binder">!</span></a><a id="Ghostly0:11" class="idref" href="#Ghostly0:11"><span class="id" title="binder">Ghostly</span></a> <a id="Ghostly0:11" class="idref" href="#Ghostly0:11"><span class="id" title="binder">PROP</span></a>} := <span class="id" title="var">mkG</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_compose.gen_preG_G" class="idref" href="#wp_compose.gen_preG_G"><span class="id" title="projection">gen_preG_G</span></a>  : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.gen_preG"><span class="id" title="class">gen_preG</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#PROP:10"><span class="id" title="variable">PROP</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_compose.futrace_name" class="idref" href="#wp_compose.futrace_name"><span class="id" title="projection">futrace_name</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">iprop.gname</span></a>;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose"><span class="id" title="module">Compose</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="b478ed707510102bd7311b86ea71e075" class="idref" href="#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n</span> := (<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Component.lts_lang"><span class="id" title="definition">Component.lts_lang</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.components"><span class="id" title="projection">components</span></a>) <span class="id" title="var">n</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="wp_compose.ComponentG" class="idref" href="#wp_compose.ComponentG"><span class="id" title="record">ComponentG</span></a> (<a id="PROP:15" class="idref" href="#PROP:15"><span class="id" title="binder">PROP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi"><span class="id" title="record">bi</span></a>) `{<a id="H:16" class="idref" href="#H:16"><span class="id" title="binder">FUpd</span></a> <a id="H:16" class="idref" href="#H:16"><span class="id" title="binder">PROP</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">mkComponentG</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_compose.componentG" class="idref" href="#wp_compose.componentG"><span class="id" title="projection">componentG</span></a> : <span class="id" title="notation">∀</span> <a id="n:18" class="idref" href="#n:18"><span class="id" title="binder">n</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>)<span class="id" title="notation">,</span> <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#inout_irisGS_gen"><span class="id" title="class">inout_irisGS_gen</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:18"><span class="id" title="variable">n</span></a>) <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#PROP:15"><span class="id" title="variable">PROP</span></a><br/>
&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="var">Existing</span> <span class="id" title="var">Instances</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.componentG"><span class="id" title="method">componentG</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="wp_compose.with_config.with_agree" class="idref" href="#wp_compose.with_config.with_agree"><span class="id" title="section">with_agree</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="wp_compose.with_config.with_agree.PROP" class="idref" href="#wp_compose.with_config.with_agree.PROP"><span class="id" title="variable">PROP</span></a>} `{!<a class="idref" href="bluerock.iris.extra.bi.prop_constraints.html#Ghostly"><span class="id" title="class">Ghostly</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#PROP:20"><span class="id" title="variable">PROP</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="wp_compose.with_config.with_agree.composeG" class="idref" href="#wp_compose.with_config.with_agree.composeG"><span class="id" title="variable">composeG</span></a> : !<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.G"><span class="id" title="class">G</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_agree.PROP"><span class="id" title="variable">PROP</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="var">Existing</span> <span class="id" title="var">Instances</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.gen_preG_G"><span class="id" title="method">gen_preG_G</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.gen_traceG"><span class="id" title="method">gen_traceG</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wp_compose.full_trace" class="idref" href="#wp_compose.full_trace"><span class="id" title="definition">full_trace</span></a> (<a id="tr:23" class="idref" href="#tr:23"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#observation"><span class="id" title="projection">observation</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a>)) : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_agree.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.bi.own.html#own"><span class="id" title="method">own</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.futrace_name"><span class="id" title="method">futrace_name</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#to_agree"><span class="id" title="definition">to_agree</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#tr:23"><span class="id" title="variable">tr</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_compose.full_trace_persistent" class="idref" href="#wp_compose.full_trace_persistent"><span class="id" title="instance">full_trace_persistent</span></a> : <a class="idref" href="bluerock.iris.extra.bi.derived_laws.html#nary.Persistent1"><span class="id" title="abbreviation">Persistent1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.full_trace"><span class="id" title="definition">full_trace</span></a> := <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_compose.full_trace_timeless" class="idref" href="#wp_compose.full_trace_timeless"><span class="id" title="instance">full_trace_timeless</span></a> : <a class="idref" href="bluerock.iris.extra.bi.derived_laws.html#nary.Timeless1"><span class="id" title="abbreviation">Timeless1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.full_trace"><span class="id" title="definition">full_trace</span></a> := <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_compose.full_trace_agree" class="idref" href="#wp_compose.full_trace_agree"><span class="id" title="instance">full_trace_agree</span></a> : <a class="idref" href="bluerock.iris.extra.bi.observe.html#nary.Agree1"><span class="id" title="abbreviation">Agree1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.full_trace"><span class="id" title="definition">full_trace</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "A1 A2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.bi.own.html#own_valid_2"><span class="id" title="lemma">own_valid_2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "A1 A2"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %?%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#to_agree_op_valid_L"><span class="id" title="lemma">to_agree_op_valid_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> "!# !%".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_agree"><span class="id" title="section">with_agree</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_compose.full_trace_alloc" class="idref" href="#wp_compose.full_trace_alloc"><span class="id" title="lemma">full_trace_alloc</span></a> {<a id="PROP:24" class="idref" href="#PROP:24"><span class="id" title="binder">PROP</span></a>} `{<a id="Ghostly0:25" class="idref" href="#Ghostly0:25"><span class="id" title="binder">!</span></a><a id="Ghostly0:25" class="idref" href="#Ghostly0:25"><span class="id" title="binder">Ghostly</span></a> <a id="Ghostly0:25" class="idref" href="#Ghostly0:25"><span class="id" title="binder">PROP</span></a>} `{<a id="gen_preG0:26" class="idref" href="#gen_preG0:26"><span class="id" title="binder">!</span></a><a id="gen_preG0:26" class="idref" href="#gen_preG0:26"><span class="id" title="binder">gen_preG</span></a> <a id="gen_preG0:26" class="idref" href="#gen_preG0:26"><span class="id" title="binder">PROP</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:27" class="idref" href="#tr:27"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#observation"><span class="id" title="projection">observation</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#be9a2343da4fe37e3ed47c88e1c47b1e"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.G"><span class="id" title="class">G</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#PROP:24"><span class="id" title="variable">PROP</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">),</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.full_trace"><span class="id" title="definition">full_trace</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#tr:27"><span class="id" title="variable">tr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">HO</span> := <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.gen_traceG"><span class="id" title="method">gen_traceG</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<a class="idref" href="bluerock.iris.extra.bi.own.html#own_alloc"><span class="id" title="lemma">own_alloc</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#to_agree"><span class="id" title="definition">to_agree</span></a> (<span class="id" title="var">tr</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span>))) <span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span>) "FT". { <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iExists</span> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.mkG"><span class="id" title="constructor">mkG</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">γ</span>). <span class="id" title="var">iFrame</span> "FT".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="wp_compose.with_config.with_wps" class="idref" href="#wp_compose.with_config.with_wps"><span class="id" title="section">with_wps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="wp_compose.with_config.with_wps.PROP" class="idref" href="#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi"><span class="id" title="record">bi</span></a>} `{!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#BiFUpd"><span class="id" title="class">BiFUpd</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#PROP:28"><span class="id" title="variable">PROP</span></a>} `{!<a class="idref" href="bluerock.iris.extra.bi.prop_constraints.html#Ghostly"><span class="id" title="class">Ghostly</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#PROP:28"><span class="id" title="variable">PROP</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.extensions.html#BiLaterContractive"><span class="id" title="class">BiLaterContractive</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="wp_compose.with_config.with_wps.composeG" class="idref" href="#wp_compose.with_config.with_wps.composeG"><span class="id" title="variable">composeG</span></a> : !<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.G"><span class="id" title="class">G</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="wp_compose.with_config.with_wps.allGs" class="idref" href="#wp_compose.with_config.with_wps.allGs"><span class="id" title="variable">allGs</span></a> : !<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.ComponentG"><span class="id" title="class">ComponentG</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wp_compose.stateI" class="idref" href="#wp_compose.stateI"><span class="id" title="definition">stateI</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e05d27d7d3ee8f8203c6aec5c67d6b2f" class="idref" href="#e05d27d7d3ee8f8203c6aec5c67d6b2f"><span class="id" title="binder">σ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a>) (<a id="ns:35" class="idref" href="#ns:35"><span class="id" title="binder">ns</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="tr_f:36" class="idref" href="#tr_f:36"><span class="id" title="binder">tr_f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#observation"><span class="id" title="projection">observation</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a>)) (<a id="nt:37" class="idref" href="#nt:37"><span class="id" title="binder">nt</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">tr_p</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e05d27d7d3ee8f8203c6aec5c67d6b2f"><span class="id" title="variable">σ</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;tracking&nbsp;composed&nbsp;history&nbsp;trace&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.full_trace"><span class="id" title="definition">full_trace</span></a> (<span class="id" title="var">tr_p</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#tr_f:36"><span class="id" title="variable">tr_f</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;ownership&nbsp;of&nbsp;each&nbsp;component's&nbsp;<span class="inlinecode"><span class="id" title="var">state_interp</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">set</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">]</span></a> <a id="n:39" class="idref" href="#n:39"><span class="id" title="binder"><span id="n:40" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.NAMES"><span class="id" title="variable">NAMES</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="ns_n:41" class="idref" href="#ns_n:41"><span class="id" title="binder">ns_n</span></a> <a id="nt_n:42" class="idref" href="#nt_n:42"><span class="id" title="binder">nt_n</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <span class="comment">(*&nbsp;TODO&nbsp;:&nbsp;we&nbsp;may&nbsp;want&nbsp;to&nbsp;tie&nbsp;ns_n/nt_n&nbsp;to&nbsp;ns/nt&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="s_n:43" class="idref" href="#s_n:43"><span class="id" title="binder">s_n</span></a>     := (<span class="id" title="definition">fin_prod.lookup</span> <span class="id" title="var">s</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:39"><span class="id" title="variable">n</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="tr_p_n:44" class="idref" href="#tr_p_n:44"><span class="id" title="binder">tr_p_n</span></a>  := <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace"><span class="id" title="definition">proj_trace</span></a> <span class="id" title="var">tr_p</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:39"><span class="id" title="variable">n</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="tr_f_n:45" class="idref" href="#tr_f_n:45"><span class="id" title="binder">tr_f_n</span></a>  := <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace"><span class="id" title="definition">proj_trace</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#tr_f:36"><span class="id" title="variable">tr_f</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:39"><span class="id" title="variable">n</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">_</span> := <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_irisGS_gen"><span class="id" title="method">ctx_irisGS_gen</span></a> (<span class="id" title="var">Λ</span> := <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:39"><span class="id" title="variable">n</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#state_interp"><span class="id" title="method">state_interp</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#tr_p_n:44"><span class="id" title="variable">tr_p_n</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#s_n:43"><span class="id" title="variable">s_n</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#ns_n:41"><span class="id" title="variable">ns_n</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#tr_f_n:45"><span class="id" title="variable">tr_f_n</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#nt_n:42"><span class="id" title="variable">nt_n</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wp_compose.compose_irisGS_gen" class="idref" href="#wp_compose.compose_irisGS_gen"><span class="id" title="definition">compose_irisGS_gen</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#irisGS_gen"><span class="id" title="class">irisGS_gen</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#IrisG"><span class="id" title="constructor">IrisG</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.stateI"><span class="id" title="definition">stateI</span></a> (<span class="id" title="notation">λ</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'False'"><span class="id" title="notation">False</span></a>%<span class="id" title="var">I</span>) (<span class="id" title="notation">λ</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> 1) (<span class="id" title="notation">λ</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_intro"><span class="id" title="lemma">fupd_intro</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wp_compose.input_spec" class="idref" href="#wp_compose.input_spec"><span class="id" title="definition">input_spec</span></a> (<a id="fc5685bffa2408b82e8bb73f23756412" class="idref" href="#fc5685bffa2408b82e8bb73f23756412"><span class="id" title="binder">κ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#observation"><span class="id" title="projection">observation</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a>)) : <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#PrePost"><span class="id" title="record">PrePost</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a> := {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_pre"><span class="id" title="projection">tele_pre</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#fc5685bffa2408b82e8bb73f23756412"><span class="id" title="variable">κ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Forward"><span class="id" title="constructor">Forward</span></a> <span class="id" title="var">n</span> <span class="id" title="var">e_n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_pre"><span class="id" title="projection">tele_pre</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_in_spec"><span class="id" title="method">ctx_in_spec</span></a> <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e_n</span><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_pre"><span class="id" title="projection">tele_pre</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_in_spec"><span class="id" title="method">ctx_in_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Sync"><span class="id" title="constructor">Sync</span></a> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_pre"><span class="id" title="projection">tele_pre</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_in_spec"><span class="id" title="method">ctx_in_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n2</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e2</span><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.telescopes.html#d80354fa0e02aee56d24df6294b9ea48"><span class="id" title="notation">[</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.telescopes.html#d80354fa0e02aee56d24df6294b9ea48"><span class="id" title="notation">tele</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.telescopes.html#d80354fa0e02aee56d24df6294b9ea48"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_post"><span class="id" title="projection">tele_post</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#fc5685bffa2408b82e8bb73f23756412"><span class="id" title="variable">κ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Forward"><span class="id" title="constructor">Forward</span></a> <span class="id" title="var">n</span> <span class="id" title="var">e_n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_post"><span class="id" title="projection">tele_post</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_in_spec"><span class="id" title="method">ctx_in_spec</span></a> <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e_n</span><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_post"><span class="id" title="projection">tele_post</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_in_spec"><span class="id" title="method">ctx_in_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Sync"><span class="id" title="constructor">Sync</span></a> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_post"><span class="id" title="projection">tele_post</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_in_spec"><span class="id" title="method">ctx_in_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n2</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e2</span><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">λ</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.telescopes.html#d80354fa0e02aee56d24df6294b9ea48"><span class="id" title="notation">[</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.telescopes.html#d80354fa0e02aee56d24df6294b9ea48"><span class="id" title="notation">tele</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.telescopes.html#d80354fa0e02aee56d24df6294b9ea48"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#pre"><span class="id" title="projection">pre</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#fc5685bffa2408b82e8bb73f23756412"><span class="id" title="variable">κ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Forward"><span class="id" title="constructor">Forward</span></a> <span class="id" title="var">n</span> <span class="id" title="var">e_n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">λ</span> <a id="args:50" class="idref" href="#args:50"><span class="id" title="binder">args</span></a><span class="id" title="notation">,</span> <a class="idref" href="bluerock.iris.extra.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.inj_evt"><span class="id" title="projection">inj_evt</span></a> <span class="id" title="var">n</span> <span class="id" title="var">e_n</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e</span> <a class="idref" href="bluerock.iris.extra.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#pre"><span class="id" title="projection">pre</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_in_spec"><span class="id" title="method">ctx_in_spec</span></a> <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e_n</span><span class="id" title="notation">]</span>) <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#args:50"><span class="id" title="variable">args</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#pre"><span class="id" title="projection">pre</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_in_spec"><span class="id" title="method">ctx_in_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Sync"><span class="id" title="constructor">Sync</span></a> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">λ</span> <a id="args:51" class="idref" href="#args:51"><span class="id" title="binder">args</span></a><span class="id" title="notation">,</span> <a class="idref" href="bluerock.iris.extra.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.cancel_event_asym"><span class="id" title="projection">cancel_event_asym</span></a> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <a class="idref" href="bluerock.iris.extra.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#pre"><span class="id" title="projection">pre</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_in_spec"><span class="id" title="method">ctx_in_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n2</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e2</span><span class="id" title="notation">]</span>) <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#args:51"><span class="id" title="variable">args</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">λ</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'emp'"><span class="id" title="notation">emp</span></a>%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#post"><span class="id" title="projection">post</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#fc5685bffa2408b82e8bb73f23756412"><span class="id" title="variable">κ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Forward"><span class="id" title="constructor">Forward</span></a> <span class="id" title="var">n</span> <span class="id" title="var">e_n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#post"><span class="id" title="projection">post</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_in_spec"><span class="id" title="method">ctx_in_spec</span></a> <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e_n</span><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#post"><span class="id" title="projection">post</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_in_spec"><span class="id" title="method">ctx_in_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Sync"><span class="id" title="constructor">Sync</span></a> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#post"><span class="id" title="projection">post</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_in_spec"><span class="id" title="method">ctx_in_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n2</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e2</span><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">λ</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'emp'"><span class="id" title="notation">emp</span></a>%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wp_compose.output_spec" class="idref" href="#wp_compose.output_spec"><span class="id" title="definition">output_spec</span></a> (<a id="6d38870aed28f3ec822887761c8250d5" class="idref" href="#6d38870aed28f3ec822887761c8250d5"><span class="id" title="binder">κ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#observation"><span class="id" title="projection">observation</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a>)) : <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#PrePost"><span class="id" title="record">PrePost</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a> := {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_pre"><span class="id" title="projection">tele_pre</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#6d38870aed28f3ec822887761c8250d5"><span class="id" title="variable">κ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Forward"><span class="id" title="constructor">Forward</span></a> <span class="id" title="var">n</span> <span class="id" title="var">e_n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_pre"><span class="id" title="projection">tele_pre</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_out_spec"><span class="id" title="method">ctx_out_spec</span></a> <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e_n</span><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_pre"><span class="id" title="projection">tele_pre</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_out_spec"><span class="id" title="method">ctx_out_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Sync"><span class="id" title="constructor">Sync</span></a> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_pre"><span class="id" title="projection">tele_pre</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_out_spec"><span class="id" title="method">ctx_out_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n1</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e1</span><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.telescopes.html#d80354fa0e02aee56d24df6294b9ea48"><span class="id" title="notation">[</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.telescopes.html#d80354fa0e02aee56d24df6294b9ea48"><span class="id" title="notation">tele</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.telescopes.html#d80354fa0e02aee56d24df6294b9ea48"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_post"><span class="id" title="projection">tele_post</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#6d38870aed28f3ec822887761c8250d5"><span class="id" title="variable">κ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Forward"><span class="id" title="constructor">Forward</span></a> <span class="id" title="var">n</span> <span class="id" title="var">e_n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_post"><span class="id" title="projection">tele_post</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_out_spec"><span class="id" title="method">ctx_out_spec</span></a> <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e_n</span><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_post"><span class="id" title="projection">tele_post</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_out_spec"><span class="id" title="method">ctx_out_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Sync"><span class="id" title="constructor">Sync</span></a> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#tele_post"><span class="id" title="projection">tele_post</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_out_spec"><span class="id" title="method">ctx_out_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n1</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e1</span><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">λ</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.telescopes.html#d80354fa0e02aee56d24df6294b9ea48"><span class="id" title="notation">[</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.telescopes.html#d80354fa0e02aee56d24df6294b9ea48"><span class="id" title="notation">tele</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.telescopes.html#d80354fa0e02aee56d24df6294b9ea48"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#pre"><span class="id" title="projection">pre</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#6d38870aed28f3ec822887761c8250d5"><span class="id" title="variable">κ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Forward"><span class="id" title="constructor">Forward</span></a> <span class="id" title="var">n</span> <span class="id" title="var">e_n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">λ</span> <a id="args:57" class="idref" href="#args:57"><span class="id" title="binder">args</span></a><span class="id" title="notation">,</span> <a class="idref" href="bluerock.iris.extra.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.inj_evt"><span class="id" title="projection">inj_evt</span></a> <span class="id" title="var">n</span> <span class="id" title="var">e_n</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e</span> <a class="idref" href="bluerock.iris.extra.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#pre"><span class="id" title="projection">pre</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_out_spec"><span class="id" title="method">ctx_out_spec</span></a> <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e_n</span><span class="id" title="notation">]</span>) <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#args:57"><span class="id" title="variable">args</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#pre"><span class="id" title="projection">pre</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_out_spec"><span class="id" title="method">ctx_out_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Sync"><span class="id" title="constructor">Sync</span></a> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">λ</span> <a id="args:58" class="idref" href="#args:58"><span class="id" title="binder">args</span></a><span class="id" title="notation">,</span> <a class="idref" href="bluerock.iris.extra.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.cancel_event_asym"><span class="id" title="projection">cancel_event_asym</span></a> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <a class="idref" href="bluerock.iris.extra.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#pre"><span class="id" title="projection">pre</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_out_spec"><span class="id" title="method">ctx_out_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n1</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e1</span><span class="id" title="notation">]</span>) <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#args:58"><span class="id" title="variable">args</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">λ</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'emp'"><span class="id" title="notation">emp</span></a>%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#post"><span class="id" title="projection">post</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#6d38870aed28f3ec822887761c8250d5"><span class="id" title="variable">κ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Forward"><span class="id" title="constructor">Forward</span></a> <span class="id" title="var">n</span> <span class="id" title="var">e_n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#post"><span class="id" title="projection">post</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_out_spec"><span class="id" title="method">ctx_out_spec</span></a> <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e_n</span><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#post"><span class="id" title="projection">post</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_out_spec"><span class="id" title="method">ctx_out_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Sync"><span class="id" title="constructor">Sync</span></a> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span> =&gt; <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#post"><span class="id" title="projection">post</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_out_spec"><span class="id" title="method">ctx_out_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n1</span>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e1</span><span class="id" title="notation">]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">λ</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'emp'"><span class="id" title="notation">emp</span></a>%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Instance</span> <a id="wp_compose.compose_inout_irisGS_gen" class="idref" href="#wp_compose.compose_inout_irisGS_gen"><span class="id" title="instance">compose_inout_irisGS_gen</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#inout_irisGS_gen"><span class="id" title="class">inout_irisGS_gen</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a> := {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_irisGS_gen"><span class="id" title="method">ctx_irisGS_gen</span></a>  := <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.compose_irisGS_gen"><span class="id" title="definition">compose_irisGS_gen</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_out_spec"><span class="id" title="method">ctx_out_spec</span></a>    := <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.output_spec"><span class="id" title="definition">output_spec</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_in_spec"><span class="id" title="method">ctx_in_spec</span></a>     := <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.input_spec"><span class="id" title="definition">input_spec</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="wp_compose.LogicComposeProp" class="idref" href="#wp_compose.LogicComposeProp"><span class="id" title="record">LogicComposeProp</span></a> := <span class="id" title="var">mkLogComProp</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
This forces the components to have no extra later, so each component
      will have exactly ONE later per step. Meanwhile, we have set up the
      compose logic to have ONE EXTRA later per step.
      Therefore, when in a communication step, we have exactly TWO laters from
      the compose logic and give ONE to each component. In non-communication
      steps, we only need ONE later, so we simply throw away the other one.

<div class="paragraph"> </div>

      A general setup may require that the compose logic always have enough
      laters for any pair of components that have communication steps.
      
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_compose.all_no_extra_later" class="idref" href="#wp_compose.all_no_extra_later"><span class="id" title="projection">all_no_extra_later</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∀</span> <a id="n:61" class="idref" href="#n:61"><span class="id" title="binder">n</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>)<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">_</span> := <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_irisGS_gen"><span class="id" title="method">ctx_irisGS_gen</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:61"><span class="id" title="variable">n</span></a>) <span class="id" title="tactic">in</span> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#num_laters_per_step"><span class="id" title="method">num_laters_per_step</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">λ</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> 0) ;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
We require that communicating components have matching specs. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_compose.all_sync_input_output" class="idref" href="#wp_compose.all_sync_input_output"><span class="id" title="projection">all_sync_input_output</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∀</span> <span class="id" title="notation">(</span><a id="n1:63" class="idref" href="#n1:63"><span class="id" title="binder">n1</span></a> <a id="n2:64" class="idref" href="#n2:64"><span class="id" title="binder">n2</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e1:65" class="idref" href="#e1:65"><span class="id" title="binder">e1</span></a> : (<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.components"><span class="id" title="projection">components</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n1:63"><span class="id" title="variable">n1</span></a>).(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Component.Event"><span class="id" title="projection">Component.Event</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e2:66" class="idref" href="#e2:66"><span class="id" title="binder">e2</span></a> : (<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.components"><span class="id" title="projection">components</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n2:64"><span class="id" title="variable">n2</span></a>).(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Component.Event"><span class="id" title="projection">Component.Event</span></a>)<span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.cancel_event_asym"><span class="id" title="projection">cancel_event_asym</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n1:63"><span class="id" title="variable">n1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n2:64"><span class="id" title="variable">n2</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e1:65"><span class="id" title="variable">e1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e2:66"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="in_spec:67" class="idref" href="#in_spec:67"><span class="id" title="binder">in_spec</span></a> := <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_in_spec"><span class="id" title="method">ctx_in_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n1:63"><span class="id" title="variable">n1</span></a>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e1:65"><span class="id" title="variable">e1</span></a><span class="id" title="notation">]</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="out_spec:68" class="idref" href="#out_spec:68"><span class="id" title="binder">out_spec</span></a> := <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#ctx_out_spec"><span class="id" title="method">ctx_out_spec</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n2:64"><span class="id" title="variable">n2</span></a>) <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e2:66"><span class="id" title="variable">e2</span></a><span class="id" title="notation">]</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#callee_caller_specs_pair"><span class="id" title="definition">callee_caller_specs_pair</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#in_spec:67"><span class="id" title="variable">in_spec</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#out_spec:68"><span class="id" title="variable">out_spec</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="wp_compose.with_config.with_wps.WPc" class="idref" href="#wp_compose.with_config.with_wps.WPc"><span class="id" title="variable">WPc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c4f8ac9cf093a8b3a048a3e099825b5a" class="idref" href="#c4f8ac9cf093a8b3a048a3e099825b5a"><span class="id" title="binder">Φs</span></a> : <span class="id" title="notation">∀</span> <a id="n:70" class="idref" href="#n:70"><span class="id" title="binder">n</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>)<span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:70"><span class="id" title="variable">n</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ns:72" class="idref" href="#Ns:72"><span class="id" title="binder">Ns</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">λ</span> <a id="e:73" class="idref" href="#e:73"><span class="id" title="binder">e</span></a> <a id="n:74" class="idref" href="#n:74"><span class="id" title="binder">n</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">if</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Component.to_val"><span class="id" title="projection">Component.to_val</span></a> <span class="id" title="var">_</span> (<span class="id" title="definition">fin_prod.lookup</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e:73"><span class="id" title="variable">e</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:74"><span class="id" title="variable">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:74"><span class="id" title="variable">n</span></a>)) <span class="id" title="keyword">is</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#Ns:72"><span class="id" title="variable">Ns</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:74"><span class="id" title="variable">n</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#c4f8ac9cf093a8b3a048a3e099825b5a"><span class="id" title="variable">Φs</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:74"><span class="id" title="variable">n</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">WP</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">(</span></a><span class="id" title="definition">fin_prod.lookup</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e:73"><span class="id" title="variable">e</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:74"><span class="id" title="variable">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:74"><span class="id" title="variable">n</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#Ns:72"><span class="id" title="variable">Ns</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:74"><span class="id" title="variable">n</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">?{{</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#c4f8ac9cf093a8b3a048a3e099825b5a"><span class="id" title="variable">Φs</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:74"><span class="id" title="variable">n</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="wp_compose.convert_wp_wpc" class="idref" href="#wp_compose.convert_wp_wpc"><span class="id" title="lemma">convert_wp_wpc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="714e28f2eb36a0c778a590179a55087f" class="idref" href="#714e28f2eb36a0c778a590179a55087f"><span class="id" title="binder">Φs</span></a> : <span class="id" title="notation">∀</span> <a id="n:75" class="idref" href="#n:75"><span class="id" title="binder">n</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>)<span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:75"><span class="id" title="variable">n</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ns:77" class="idref" href="#Ns:77"><span class="id" title="binder">Ns</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e:78" class="idref" href="#e:78"><span class="id" title="binder">e</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a>) (<a id="n:79" class="idref" href="#n:79"><span class="id" title="binder">n</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">WP</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">(</span></a><span class="id" title="definition">fin_prod.lookup</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e:78"><span class="id" title="variable">e</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:79"><span class="id" title="variable">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:79"><span class="id" title="variable">n</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#Ns:77"><span class="id" title="variable">Ns</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:79"><span class="id" title="variable">n</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">?{{</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#714e28f2eb36a0c778a590179a55087f"><span class="id" title="variable">Φs</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:79"><span class="id" title="variable">n</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#339ab4f22dde4fec5350c24306973201"><span class="id" title="notation">⊣⊢@{</span></a><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#339ab4f22dde4fec5350c24306973201"><span class="id" title="notation">}</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.WPc"><span class="id" title="variable">WPc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#714e28f2eb36a0c778a590179a55087f"><span class="id" title="variable">Φs</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#Ns:77"><span class="id" title="variable">Ns</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e:78"><span class="id" title="variable">e</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:79"><span class="id" title="variable">n</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">WPc</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_match</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Eqn</span>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#of_to_val"><span class="id" title="lemma">of_to_val</span></a> (<span class="id" title="var">Λ</span> := <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Eqn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#wp_value_fupd"><span class="id" title="lemma">wp_value_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="wp_compose.convert_wps_wpc" class="idref" href="#wp_compose.convert_wps_wpc"><span class="id" title="lemma">convert_wps_wpc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="9d913c7d4da11e0c4c7d79591e60e1bc" class="idref" href="#9d913c7d4da11e0c4c7d79591e60e1bc"><span class="id" title="binder">Φs</span></a> : <span class="id" title="notation">∀</span> <a id="n:80" class="idref" href="#n:80"><span class="id" title="binder">n</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>)<span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:80"><span class="id" title="variable">n</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ns:82" class="idref" href="#Ns:82"><span class="id" title="binder">Ns</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e:83" class="idref" href="#e:83"><span class="id" title="binder">e</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a>) (<a id="ns:84" class="idref" href="#ns:84"><span class="id" title="binder">ns</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gset"><span class="id" title="definition">gset</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">set</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">]</span></a> <a id="n:85" class="idref" href="#n:85"><span class="id" title="binder"><span id="n:86" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#ns:84"><span class="id" title="variable">ns</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">WP</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">(</span></a><span class="id" title="definition">fin_prod.lookup</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e:83"><span class="id" title="variable">e</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:85"><span class="id" title="variable">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:85"><span class="id" title="variable">n</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#Ns:82"><span class="id" title="variable">Ns</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:85"><span class="id" title="variable">n</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">?{{</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#9d913c7d4da11e0c4c7d79591e60e1bc"><span class="id" title="variable">Φs</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:85"><span class="id" title="variable">n</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#339ab4f22dde4fec5350c24306973201"><span class="id" title="notation">⊣⊢@{</span></a><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#339ab4f22dde4fec5350c24306973201"><span class="id" title="notation">}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">set</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">]</span></a> <a id="n:87" class="idref" href="#n:87"><span class="id" title="binder"><span id="n:88" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#ns:84"><span class="id" title="variable">ns</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.WPc"><span class="id" title="variable">WPc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#9d913c7d4da11e0c4c7d79591e60e1bc"><span class="id" title="variable">Φs</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#Ns:82"><span class="id" title="variable">Ns</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e:83"><span class="id" title="variable">e</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:87"><span class="id" title="variable">n</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_proper"><span class="id" title="lemma">big_sepS_proper</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.convert_wp_wpc"><span class="id" title="lemma">convert_wp_wpc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="wp_compose.convert_wps_values" class="idref" href="#wp_compose.convert_wps_values"><span class="id" title="lemma">convert_wps_values</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="8d16ffd8c49a80fdbdaea640ad32a1fc" class="idref" href="#8d16ffd8c49a80fdbdaea640ad32a1fc"><span class="id" title="binder">Φs</span></a> : <span class="id" title="notation">∀</span> <a id="n:89" class="idref" href="#n:89"><span class="id" title="binder">n</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>)<span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:89"><span class="id" title="variable">n</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ns:91" class="idref" href="#Ns:91"><span class="id" title="binder">Ns</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e:92" class="idref" href="#e:92"><span class="id" title="binder">e</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a>) (<a id="v:93" class="idref" href="#v:93"><span class="id" title="binder">v</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a>) (<a id="ns:94" class="idref" href="#ns:94"><span class="id" title="binder">ns</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gset"><span class="id" title="definition">gset</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e:92"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#v:93"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">set</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">]</span></a> <a id="n:95" class="idref" href="#n:95"><span class="id" title="binder"><span id="n:96" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#ns:94"><span class="id" title="variable">ns</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.WPc"><span class="id" title="variable">WPc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#8d16ffd8c49a80fdbdaea640ad32a1fc"><span class="id" title="variable">Φs</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#Ns:91"><span class="id" title="variable">Ns</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e:92"><span class="id" title="variable">e</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:95"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3cd86e50ba77d13085a7d42859bc6c1d"><span class="id" title="notation">⊢@{</span></a><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3cd86e50ba77d13085a7d42859bc6c1d"><span class="id" title="notation">}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">set</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">]</span></a> <a id="n:97" class="idref" href="#n:97"><span class="id" title="binder"><span id="n:98" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#ns:94"><span class="id" title="variable">ns</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#8d16ffd8c49a80fdbdaea640ad32a1fc"><span class="id" title="variable">Φs</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:97"><span class="id" title="variable">n</span></a> (<span class="id" title="definition">fin_prod.lookup</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#v:93"><span class="id" title="variable">v</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:97"><span class="id" title="variable">n</span></a>))%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= -<span class="id" title="lemma">fin_prod.fmapO_Some</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#big_sepS_fupd"><span class="id" title="lemma">big_sepS_fupd</span></a> =&gt; <span class="id" title="var">IS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_mono"><span class="id" title="lemma">big_sepS_mono</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">_</span>. <span class="id" title="var">iIntros</span> "WP". <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IS</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.WPc"><span class="id" title="variable">WPc</span></a> <span class="id" title="var">IS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_mono"><span class="id" title="lemma">fupd_mask_mono</span></a> (<span class="id" title="var">Ns</span> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="wp_compose.wp_io_decompose" class="idref" href="#wp_compose.wp_io_decompose"><span class="id" title="lemma">wp_io_decompose</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="logComProps:99" class="idref" href="#logComProps:99"><span class="id" title="binder">logComProps</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.LogicComposeProp"><span class="id" title="class">LogicComposeProp</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="a63a7afc4cbf72a0f015a999c4c8251e" class="idref" href="#a63a7afc4cbf72a0f015a999c4c8251e"><span class="id" title="binder">Φs</span></a> : <span class="id" title="notation">∀</span> <a id="n:100" class="idref" href="#n:100"><span class="id" title="binder">n</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>)<span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:100"><span class="id" title="variable">n</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ns:102" class="idref" href="#Ns:102"><span class="id" title="binder">Ns</span></a> : <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.cfg"><span class="id" title="variable">cfg</span></a>.(<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.name"><span class="id" title="projection">name</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="DISJ:105" class="idref" href="#DISJ:105"><span class="id" title="binder">DISJ</span></a> : <span class="id" title="notation">∀</span> <a id="n1:103" class="idref" href="#n1:103"><span class="id" title="binder">n1</span></a> <a id="n2:104" class="idref" href="#n2:104"><span class="id" title="binder">n2</span></a><span class="id" title="notation">,</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n1:103"><span class="id" title="variable">n1</span></a> <span class="id" title="notation">≠</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n2:104"><span class="id" title="variable">n2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#Ns:102"><span class="id" title="variable">Ns</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n1:103"><span class="id" title="variable">n1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#Ns:102"><span class="id" title="variable">Ns</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n2:104"><span class="id" title="variable">n2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e:106" class="idref" href="#e:106"><span class="id" title="binder">e</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="0a45200a7472e3efb6d9ad27e974a7df" class="idref" href="#0a45200a7472e3efb6d9ad27e974a7df"><span class="id" title="binder">Φ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">λ</span> <a id="v:107" class="idref" href="#v:107"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">set</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">]</span></a> <a id="n:108" class="idref" href="#n:108"><span class="id" title="binder"><span id="n:109" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.NAMES"><span class="id" title="variable">NAMES</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#a63a7afc4cbf72a0f015a999c4c8251e"><span class="id" title="variable">Φs</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:108"><span class="id" title="variable">n</span></a> (<span class="id" title="definition">fin_prod.lookup</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#v:107"><span class="id" title="variable">v</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:108"><span class="id" title="variable">n</span></a>))%<span class="id" title="var">I</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">set</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">]</span></a> <a id="n:111" class="idref" href="#n:111"><span class="id" title="binder"><span id="n:112" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.NAMES"><span class="id" title="variable">NAMES</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#e72b64b59f7c5fd654ece5947ba4181d"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">WP</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">(</span></a><span class="id" title="definition">fin_prod.lookup</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e:106"><span class="id" title="variable">e</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:111"><span class="id" title="variable">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:111"><span class="id" title="variable">n</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#Ns:102"><span class="id" title="variable">Ns</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:111"><span class="id" title="variable">n</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">?{{</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#a63a7afc4cbf72a0f015a999c4c8251e"><span class="id" title="variable">Φs</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#n:111"><span class="id" title="variable">n</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#12cb0527cdc73347de0350ab32e71fd0"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3cd86e50ba77d13085a7d42859bc6c1d"><span class="id" title="notation">⊢@{</span></a><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps.PROP"><span class="id" title="variable">PROP</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3cd86e50ba77d13085a7d42859bc6c1d"><span class="id" title="notation">}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#02eafec6e7a40fb4e9e3922889db3595"><span class="id" title="notation">WP</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#e:106"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#02eafec6e7a40fb4e9e3922889db3595"><span class="id" title="notation">?{{</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#0a45200a7472e3efb6d9ad27e974a7df"><span class="id" title="variable">Φ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#02eafec6e7a40fb4e9e3922889db3595"><span class="id" title="notation">}}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "WPs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;simplify&nbsp;WPs&nbsp;who&nbsp;are&nbsp;already&nbsp;at&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.convert_wps_wpc"><span class="id" title="lemma">convert_wps_wpc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "WPs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "WPs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iLöb</span> <span class="id" title="keyword">as</span> "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#wp_unfold"><span class="id" title="lemma">wp_unfold</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#bc705b45a890839a9cbd7b1bd0077a1c"><span class="id" title="variable">Λ</span></a>)) /<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#wp_pre"><span class="id" title="definition">wp_pre</span></a>.<br/>

<br/>
</div>

<div class="doc">
GENERAL PROOF STEP :
      if the composed expression <span class="inlinecode"><span class="id" title="var">e</span></span> is a value, all components are also values,
      and the obligation here is to combine the post-conditions
      of all component WPs to construct the composed post-condition.
      
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_match</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Eqn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.convert_wps_values"><span class="id" title="lemma">convert_wps_values</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "WPs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> ([<span class="id" title="var">tr_p</span> σ1] <span class="id" title="var">ns</span> <span class="id" title="var">κ</span> <span class="id" title="var">κs</span> <span class="id" title="var">nt</span>) "SI".<br/>

<br/>
</div>

<div class="doc">
GENERAL PROOF STEP :
      In case we have to consider non-stuckness: because the composed expression
      <span class="inlinecode"><span class="id" title="var">e</span></span> is not a value, there must be a component that is not a value.
      We can use the WP of that component to get that it is still reducible.
<ul class="doclist">
<li> if the reducible step is a non-communicating step, then we can prove
        the composed machine reducible.

</li>
<li> POTENTIAL PROBLEM:
        if the reducible step is a communicating step, then we will need to
        show that the communicating partner is also reducible with the matching
        communication event.
        This is problematic because reducible seems too strong:
        some configuration is only reducible conditionally on the right input event.

<div class="paragraph"> </div>

        So we either abandon non-stuckness, OR we need to generalize reducible
        to synchronizing event such that the proof that an output event is
        reducible also includes the proof that its matching input event is also
        reducible.
        This generalization seems to be in line with the obligations one might
        expect when making an output event.

<div class="paragraph"> </div>

        Intuitively, stronger reducible should imply:

<div class="paragraph"> </div>

        strong_reducible A e σ  :=
          ∃ κ e' σ' efs, prim_step A e.A σ.A κ e'.A σ'.A efs ∧
          match κ with
          | (Sync A B _ ) :: κ' =&gt;
            ∃ kB' efsB, prim_step B e.B σ.B (Sync A B _ ) :: κB' e'.B σ'.B efsB
          | _ =&gt; True
          end.

<div class="paragraph"> </div>

        where e and σ refer to the composed machine.
        But we want a compositional definition of this concept, so that
        we can break the obligations into separate obligations
        in WP A and WP B and some shared invariant among them.

</li>
</ul>
      
<div class="paragraph"> </div>

 GENERAL PROOF STEP :
      Case distinction on the next step <span class="inlinecode"><span class="id" title="var">κ</span></span>.
      We first start with the case where <span class="inlinecode"><span class="id" title="var">κ</span></span> <span class="inlinecode">++</span> <span class="inlinecode"><span class="id" title="var">κs</span></span> is empty.
      
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">tr</span> := (<span class="id" title="var">κ</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">κs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">Hκs</span> : <span class="id" title="var">κ</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">κs</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">tr</span>. { <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">label_e</span> <span class="id" title="var">label_src</span>] <span class="id" title="var">tr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
GENERAL PROOF STEP :
        Empty future trace, we shouldn't have any special obligation.
        
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_intro"><span class="id" title="lemma">fupd_mask_intro</span></a>; [<span class="id" title="var">solve_ndisj</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Close" (<span class="id" title="var">x_i</span>) "Hαi".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#reducible"><span class="id" title="definition">reducible</span></a></span> for the composed language.
          We're not handling non-stuckness, so this is no obligation. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">e2</span> σ2 <span class="id" title="var">efs</span> <span class="id" title="var">STEP</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; <span class="id" title="var">Eqκs</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Here&nbsp;we&nbsp;rely&nbsp;on&nbsp;the&nbsp;fact&nbsp;that&nbsp;a&nbsp;step&nbsp;always&nbsp;emits&nbsp;an&nbsp;event,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;so&nbsp;the&nbsp;trace&nbsp;cannot&nbsp;be&nbsp;empty.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">Hκs</span> <span class="id" title="var">Eqκs</span>. <span class="id" title="var">simplify_list_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
GENERAL PROOF STEP :
      Here we rely on the fact that a step always emits exactly an event,
      so we know the next step is gonna emit <span class="inlinecode">(<span class="id" title="var">label_e</span>,</span> <span class="inlinecode"><span class="id" title="var">label_src</span>)</span>.
      By *peeking* into <span class="inlinecode"><span class="id" title="var">label_src</span></span> we know the original component that emits
      this event.
      
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "SI" <span class="id" title="keyword">as</span> "(FULLTR &amp; SIs)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">label_src</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span>|<span class="id" title="var">n</span> <span class="id" title="var">label_n</span>|<span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">label1</span> <span class="id" title="var">label2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">Tau</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>&nbsp;step&nbsp;by&nbsp;the&nbsp;component&nbsp;<span class="inlinecode"><span class="id" title="var">n</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;GENERAL&nbsp;PROOF&nbsp;STEP:&nbsp;extract&nbsp;the&nbsp;WP&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">EqL</span> : <span class="id" title="var">n</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.NAMES"><span class="id" title="variable">NAMES</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#elem_of_list_to_set"><span class="id" title="lemma">elem_of_list_to_set</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "WPs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[WPn WPs]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.convert_wp_wpc"><span class="id" title="lemma">convert_wp_wpc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#wp_unfold"><span class="id" title="lemma">wp_unfold</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n</span>)) /<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#wp_pre"><span class="id" title="definition">wp_pre</span></a> [<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <span class="id" title="var">_</span>]/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_match</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Eqen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Our&nbsp;peeking&nbsp;is&nbsp;sound:&nbsp;the&nbsp;component&nbsp;<span class="inlinecode"><span class="id" title="var">n</span></span>&nbsp;is&nbsp;not&nbsp;a&nbsp;value,&nbsp;exfalso&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_intro"><span class="id" title="lemma">fupd_mask_intro</span></a>; [<span class="id" title="var">solve_ndisj</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Close" (<span class="id" title="var">x_i</span>) "Hαi".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>. { <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">e2</span> [<span class="id" title="var">tr2</span> σ2] <span class="id" title="var">efs</span> <span class="id" title="var">STEP</span>). <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">STEP</span> <span class="id" title="var">Hκs</span> <span class="id" title="var">Eqen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; -&gt; &amp; ? &amp; -&gt; &amp; <span class="id" title="var">STEP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_list_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">label_e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">label_e</span>|]; <span class="id" title="tactic">first</span> <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">STEP</span>|?]; <span class="id" title="var">last</span> <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?&amp;<span class="id" title="var">STEP</span>&amp;<span class="id" title="var">_</span>). <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Component.language_mixin"><span class="id" title="projection">Component.language_mixin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Eqen</span> <span class="id" title="tactic">in</span> <span class="id" title="var">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;GENERAL&nbsp;PROOF&nbsp;STEP:&nbsp;extract&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">state_interp</span></span>&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "SIs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[SIn SIs]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "SIn" <span class="id" title="keyword">as</span> (<span class="id" title="var">ns_s</span> <span class="id" title="var">nt_n</span>) "SIn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_cons"><span class="id" title="lemma">proj_trace_cons</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_singleton_tau_eq"><span class="id" title="lemma">proj_trace_singleton_tau_eq</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;GENERAL&nbsp;PROOF&nbsp;STEP:&nbsp;apply&nbsp;the&nbsp;WP&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_subseteq"><span class="id" title="lemma">fupd_mask_subseteq</span></a> (<span class="id" title="var">Ns</span> <span class="id" title="var">n</span>)) <span class="id" title="keyword">as</span> "Close1". { <span class="id" title="var">solve_ndisj</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"WPn" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "SIn"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Contn".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">x_i</span>) "Hαi".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>. { <span class="comment">(*&nbsp;not&nbsp;handling&nbsp;non-stuckness&nbsp;*)</span> <span class="id" title="var">done</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">e2</span> [<span class="id" title="var">tr2</span> σ2] <span class="id" title="var">efs</span> <span class="id" title="var">STEP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;inversion&nbsp;of&nbsp;STEP&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">label_e'</span> &amp; <span class="id" title="var">label_src'</span> &amp; -&gt; &amp; -&gt; &amp; -&gt; &amp; <span class="id" title="var">STEP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hκs</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hκs</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">label_e'</span> <span class="id" title="var">label_src'</span> <span class="id" title="var">κs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">label_e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">label_e</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">STEP</span>. <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">STEP</span>|<span class="id" title="var">STEP</span>]; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">STEP</span>. <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">c</span> &amp; <span class="id" title="var">en</span> &amp; <span class="id" title="var">sc'</span> &amp; <span class="id" title="var">Eqc</span> &amp; <span class="id" title="var">PSTEP</span> &amp; -&gt; &amp; <span class="id" title="var">STEP</span> &amp; -&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Eqc</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Eqc</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;end&nbsp;inversion&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Contn" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">x_i</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "Hαi"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (?) "Contn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Contn" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">en</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace"><span class="id" title="definition">proj_trace</span></a> (<span class="id" title="var">tr_p</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span>) <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">sc'</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[%]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">x_o_n</span>) "[Hαo_n Contn]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> /=. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_app"><span class="id" title="lemma">proj_trace_app</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_singleton_tau_eq"><span class="id" title="lemma">proj_trace_singleton_tau_eq</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">x_o_n</span>. <span class="id" title="var">iSplitL</span> "Hαo_n". { <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.all_no_extra_later"><span class="id" title="method">all_no_extra_later</span></a> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "Contn" <span class="id" title="keyword">as</span> "Contn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt; !&gt;". <span class="id" title="var">iMod</span> "Contn". <span class="id" title="var">iIntros</span> "!&gt; !&gt; !&gt; !&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">y_o</span>) "Hβo".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Contn" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">y_o</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "Hβo"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">y_i_o</span>) "(Hβo_n &amp; SIn &amp; WPn &amp; ?)".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "Close1" <span class="id" title="keyword">as</span> "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">y_i_o</span>. <span class="id" title="var">iSplitL</span> "Hβo_n". { <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;re-establishing&nbsp;<span class="inlinecode"><span class="id" title="var">state_interp</span></span>s&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "FULLTR SIs SIn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> 2!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#length_nil"><span class="id" title="definition">length_nil</span></a> 2!<span class="id" title="lemma">Nat.add_0_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "FULLTR". { <span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">app_assoc</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL</span>). <span class="id" title="var">iSplitL</span> "SIn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fin_prod.lookup_update_eq</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "SIn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_mono"><span class="id" title="lemma">big_sepS_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "SIs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nk</span> [<span class="id" title="var">Eqnk</span> ?%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#not_elem_of_singleton"><span class="id" title="lemma">not_elem_of_singleton</span></a>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_difference"><span class="id" title="method">elem_of_difference</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fin_prod.lookup_update_ne</span>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_app"><span class="id" title="lemma">proj_trace_app</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_cons"><span class="id" title="lemma">proj_trace_cons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">tr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_singleton_tau_ne"><span class="id" title="lemma">proj_trace_singleton_tau_ne</span></a> // <span class="id" title="lemma">app_nil_l</span> <span class="id" title="lemma">app_nil_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;applying&nbsp;the&nbsp;induction&nbsp;hypothesis&nbsp;for&nbsp;the&nbsp;next&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "IH".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL</span>). <span class="id" title="var">iSplitL</span> "WPn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.convert_wp_wpc"><span class="id" title="lemma">convert_wp_wpc</span></a> <span class="id" title="lemma">fin_prod.lookup_update_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span> "WPn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_mono"><span class="id" title="lemma">big_sepS_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "WPs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">nk</span> [<span class="id" title="var">Eqnk</span> ?%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#not_elem_of_singleton"><span class="id" title="lemma">not_elem_of_singleton</span></a>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_difference"><span class="id" title="method">elem_of_difference</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -2!<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.convert_wp_wpc"><span class="id" title="lemma">convert_wp_wpc</span></a> <span class="id" title="lemma">fin_prod.lookup_update_ne</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">Forward</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="var">label_n</span></span>&nbsp;step&nbsp;by&nbsp;the&nbsp;component&nbsp;<span class="inlinecode"><span class="id" title="var">n</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;GENERAL&nbsp;PROOF&nbsp;STEP:&nbsp;extract&nbsp;the&nbsp;WP&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">EqL</span> : <span class="id" title="var">n</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.NAMES"><span class="id" title="variable">NAMES</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#elem_of_list_to_set"><span class="id" title="lemma">elem_of_list_to_set</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "WPs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[WPn WPs]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.convert_wp_wpc"><span class="id" title="lemma">convert_wp_wpc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#wp_unfold"><span class="id" title="lemma">wp_unfold</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n</span>)) /<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#wp_pre"><span class="id" title="definition">wp_pre</span></a> [<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <span class="id" title="var">_</span>]/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_match</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Eqen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;the&nbsp;component&nbsp;<span class="inlinecode"><span class="id" title="var">n</span></span>&nbsp;is&nbsp;not&nbsp;a&nbsp;value,&nbsp;exfalso&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_intro"><span class="id" title="lemma">fupd_mask_intro</span></a>; [<span class="id" title="var">solve_ndisj</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Close" (<span class="id" title="var">x_i</span>) "Hαi".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>. { <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">e2</span> [<span class="id" title="var">tr2</span> σ2] <span class="id" title="var">efs</span> <span class="id" title="var">STEP</span>). <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">STEP</span> <span class="id" title="var">Hκs</span> <span class="id" title="var">Eqen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; -&gt; &amp; ? &amp; -&gt; &amp; <span class="id" title="var">STEP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_list_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">label_e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">label_e</span>|]; <span class="id" title="var">last</span> <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;<span class="id" title="var">STEP</span>&amp;<span class="id" title="var">_</span>). <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Component.language_mixin"><span class="id" title="projection">Component.language_mixin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Eqen</span> <span class="id" title="tactic">in</span> <span class="id" title="var">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;GENERAL&nbsp;PROOF&nbsp;STEP:&nbsp;extract&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">state_interp</span></span>&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "SIs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[SIn SIs]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "SIn" <span class="id" title="keyword">as</span> (<span class="id" title="var">ns_s</span> <span class="id" title="var">nt_n</span>) "SIn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_cons"><span class="id" title="lemma">proj_trace_cons</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_singleton_forward_eq"><span class="id" title="lemma">proj_trace_singleton_forward_eq</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;GENERAL&nbsp;PROOF&nbsp;STEP:&nbsp;apply&nbsp;the&nbsp;WP&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_subseteq"><span class="id" title="lemma">fupd_mask_subseteq</span></a> (<span class="id" title="var">Ns</span> <span class="id" title="var">n</span>)) <span class="id" title="keyword">as</span> "Close1". { <span class="id" title="var">solve_ndisj</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"WPn" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "SIn"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Contn".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">x_i</span>) "Hαi".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>. { <span class="comment">(*&nbsp;not&nbsp;handling&nbsp;non-stuckness&nbsp;*)</span> <span class="id" title="var">done</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">e2</span> [<span class="id" title="var">tr2</span> σ2] <span class="id" title="var">efs</span> <span class="id" title="var">STEP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;inversion&nbsp;of&nbsp;STEP&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">label_e'</span> &amp; <span class="id" title="var">label_src'</span> &amp; -&gt; &amp; -&gt; &amp; -&gt; &amp; <span class="id" title="var">STEP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hκs</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hκs</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">label_e'</span> <span class="id" title="var">label_src'</span> <span class="id" title="var">κs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">label_e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">label_e</span>|]; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">STEP</span>. <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">c</span> &amp; <span class="id" title="var">en</span> &amp; <span class="id" title="var">e'</span> &amp; <span class="id" title="var">sc'</span> &amp; <span class="id" title="var">Eqel</span> &amp; <span class="id" title="var">InjE</span> &amp; <span class="id" title="var">PSTEP</span> &amp; -&gt; &amp; <span class="id" title="var">STEP</span> &amp; -&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> ? := <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.forward_inj_1"><span class="id" title="lemma">forward_inj_1</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Eqel</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.forward_inj_2"><span class="id" title="instance">forward_inj_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Eqel</span> <span class="id" title="keyword">as</span> &lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;end&nbsp;inversion&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;consume&nbsp;input&nbsp;pre-cond&nbsp;resources&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Contn" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">x_i</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "(Hαi [%//])"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (?) "Contn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Contn" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">e'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace"><span class="id" title="definition">proj_trace</span></a> (<span class="id" title="var">tr_p</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">label_e</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Forward"><span class="id" title="constructor">Forward</span></a> <span class="id" title="var">n</span> <span class="id" title="var">label_n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span>) <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">sc'</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[%]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">x_o_n</span>) "[Hαo_n Contn]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> /=. <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">label_n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_app"><span class="id" title="lemma">proj_trace_app</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_singleton_forward_eq"><span class="id" title="lemma">proj_trace_singleton_forward_eq</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">x_o_n</span>. <span class="id" title="var">iSplitL</span> "Hαo_n". { <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.all_no_extra_later"><span class="id" title="method">all_no_extra_later</span></a> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "Contn" <span class="id" title="keyword">as</span> "Contn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt; !&gt;". <span class="id" title="var">iMod</span> "Contn". <span class="id" title="var">iIntros</span> "!&gt; !&gt; !&gt; !&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">y_o</span>) "Hβo".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Contn" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">y_o</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "Hβo"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">y_i_o</span>) "(Hβo_n &amp; SIn &amp; WPn &amp; ?)".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "Close1" <span class="id" title="keyword">as</span> "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;return&nbsp;output&nbsp;post-cond&nbsp;resources&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">y_i_o</span>. <span class="id" title="var">iSplitL</span> "Hβo_n". { <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;re-establishing&nbsp;<span class="inlinecode"><span class="id" title="var">state_interp</span></span>s&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "FULLTR SIs SIn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> 2!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#length_nil"><span class="id" title="definition">length_nil</span></a> 2!<span class="id" title="lemma">Nat.add_0_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "FULLTR". { <span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">app_assoc</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL</span>). <span class="id" title="var">iSplitL</span> "SIn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fin_prod.lookup_update_eq</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "SIn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_mono"><span class="id" title="lemma">big_sepS_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "SIs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nk</span> [<span class="id" title="var">Eqnk</span> ?%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#not_elem_of_singleton"><span class="id" title="lemma">not_elem_of_singleton</span></a>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_difference"><span class="id" title="method">elem_of_difference</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fin_prod.lookup_update_ne</span>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_app"><span class="id" title="lemma">proj_trace_app</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_cons"><span class="id" title="lemma">proj_trace_cons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">tr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_singleton_forward_ne"><span class="id" title="lemma">proj_trace_singleton_forward_ne</span></a> // <span class="id" title="lemma">app_nil_l</span> <span class="id" title="lemma">app_nil_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;applying&nbsp;the&nbsp;induction&nbsp;hypothesis&nbsp;for&nbsp;the&nbsp;next&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "IH".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL</span>). <span class="id" title="var">iSplitL</span> "WPn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.convert_wp_wpc"><span class="id" title="lemma">convert_wp_wpc</span></a> <span class="id" title="lemma">fin_prod.lookup_update_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span> "WPn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_mono"><span class="id" title="lemma">big_sepS_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "WPs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">nk</span> [<span class="id" title="var">Eqnk</span> ?%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#not_elem_of_singleton"><span class="id" title="lemma">not_elem_of_singleton</span></a>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_difference"><span class="id" title="method">elem_of_difference</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -2!<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.convert_wp_wpc"><span class="id" title="lemma">convert_wp_wpc</span></a> <span class="id" title="lemma">fin_prod.lookup_update_ne</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">Sync</span></span> <span class="inlinecode"><span class="id" title="var">n1</span></span> <span class="inlinecode"><span class="id" title="var">n2</span></span> <span class="inlinecode"><span class="id" title="var">label1</span></span> <span class="inlinecode"><span class="id" title="var">label2</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;communication&nbsp;step&nbsp;by&nbsp;<span class="inlinecode"><span class="id" title="var">n1</span></span>&nbsp;(input)&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">n2</span></span>&nbsp;(output)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;GENERAL&nbsp;PROOF&nbsp;STEP:&nbsp;extract&nbsp;the&nbsp;WP&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n1</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">EqL1</span> : <span class="id" title="var">n1</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.NAMES"><span class="id" title="variable">NAMES</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#elem_of_list_to_set"><span class="id" title="lemma">elem_of_list_to_set</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL1</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "WPs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[WP1 WPs]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.convert_wp_wpc"><span class="id" title="lemma">convert_wp_wpc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#wp_unfold"><span class="id" title="lemma">wp_unfold</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n1</span>)) /<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#wp_pre"><span class="id" title="definition">wp_pre</span></a> [<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <span class="id" title="var">_</span>]/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_match</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Eqen1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Our&nbsp;peeking&nbsp;is&nbsp;sound:&nbsp;the&nbsp;component&nbsp;<span class="inlinecode"><span class="id" title="var">n1</span></span>&nbsp;is&nbsp;not&nbsp;a&nbsp;value,&nbsp;exfalso&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_intro"><span class="id" title="lemma">fupd_mask_intro</span></a>; [<span class="id" title="var">solve_ndisj</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Close" (<span class="id" title="var">x_i</span>) "Hαi".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>. { <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">e2</span> [<span class="id" title="var">tr2</span> σ2] <span class="id" title="var">efs</span> <span class="id" title="var">STEP</span>). <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">STEP</span> <span class="id" title="var">Hκs</span> <span class="id" title="var">Eqen1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; -&gt; &amp; ? &amp; -&gt; &amp; <span class="id" title="var">STEP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_list_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">label_e</span> <span class="id" title="keyword">as</span> [|]; <span class="id" title="tactic">first</span> <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">STEP</span>]; <span class="id" title="tactic">first</span> <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;<span class="id" title="var">STEP</span>&amp;<span class="id" title="var">_</span>). <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Component.language_mixin"><span class="id" title="projection">Component.language_mixin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Eqen1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;GENERAL&nbsp;PROOF&nbsp;STEP:&nbsp;we&nbsp;know&nbsp;that&nbsp;n1&nbsp;≠&nbsp;n2&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">n2</span>)) =&gt; <span class="id" title="var">NEQ12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_intro"><span class="id" title="lemma">fupd_mask_intro</span></a>; [<span class="id" title="var">solve_ndisj</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Close" (<span class="id" title="var">x_i</span>) "Hαi".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>. { <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">e2</span> [<span class="id" title="var">tr2</span> σ2] <span class="id" title="var">efs</span> <span class="id" title="var">STEP</span>). <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">n2</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">STEP</span> <span class="id" title="var">Hκs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; -&gt; &amp; ? &amp; -&gt; &amp; <span class="id" title="var">STEP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_list_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">label_e</span> <span class="id" title="keyword">as</span> [|]; <span class="id" title="tactic">first</span> <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">STEP</span>]; <span class="id" title="tactic">first</span> <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;<span class="id" title="var">_</span>). <span class="id" title="var">simplify_eq</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;GENERAL&nbsp;PROOF&nbsp;STEP:&nbsp;extract&nbsp;the&nbsp;WP&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n2</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">EqL2</span> : <span class="id" title="var">n2</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.NAMES"><span class="id" title="variable">NAMES</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><span class="id" title="var">n1</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_difference"><span class="id" title="method">elem_of_difference</span></a>. <span class="id" title="tactic">split</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#elem_of_list_to_set"><span class="id" title="lemma">elem_of_list_to_set</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL2</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "WPs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[WP2 WPs]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.convert_wp_wpc"><span class="id" title="lemma">convert_wp_wpc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#wp_unfold"><span class="id" title="lemma">wp_unfold</span></a> (<span class="id" title="var">Λ</span>:=<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#b478ed707510102bd7311b86ea71e075"><span class="id" title="abbreviation">Λc</span></a> <span class="id" title="var">n2</span>)) /<a class="idref" href="bluerock.iris.extra.wp_io.inout_weakestpre.html#wp_pre"><span class="id" title="definition">wp_pre</span></a> [<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <span class="id" title="var">_</span>]/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_match</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Eqen2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Our&nbsp;peeking&nbsp;is&nbsp;sound:&nbsp;the&nbsp;component&nbsp;<span class="inlinecode"><span class="id" title="var">n2</span></span>&nbsp;is&nbsp;not&nbsp;a&nbsp;value,&nbsp;exfalso&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_intro"><span class="id" title="lemma">fupd_mask_intro</span></a>; [<span class="id" title="var">solve_ndisj</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Close" (<span class="id" title="var">x_i</span>) "Hαi".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>. { <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">e2</span> [<span class="id" title="var">tr2</span> σ2] <span class="id" title="var">efs</span> <span class="id" title="var">STEP</span>). <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">STEP</span> <span class="id" title="var">Hκs</span> <span class="id" title="var">Eqen2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; -&gt; &amp; ? &amp; -&gt; &amp; <span class="id" title="var">STEP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_list_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">label_e</span> <span class="id" title="keyword">as</span> [|]; <span class="id" title="tactic">first</span> <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">STEP</span>]; <span class="id" title="tactic">first</span> <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;<span class="id" title="var">STEP</span>&amp;<span class="id" title="var">_</span>). <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Component.language_mixin"><span class="id" title="projection">Component.language_mixin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Eqen2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;GENERAL&nbsp;PROOF&nbsp;STEP:&nbsp;extract&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">state_interp</span></span>&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n1</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">n2</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL1</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "SIs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[SI1 SIs]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "SI1" <span class="id" title="keyword">as</span> (<span class="id" title="var">ns1</span> <span class="id" title="var">nt1</span>) "SI1".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_cons"><span class="id" title="lemma">proj_trace_cons</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_singleton_sync_eq1"><span class="id" title="lemma">proj_trace_singleton_sync_eq1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL2</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "SIs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[SI2 SIs]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "SI2" <span class="id" title="keyword">as</span> (<span class="id" title="var">ns2</span> <span class="id" title="var">nt2</span>) "SI2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_cons"><span class="id" title="lemma">proj_trace_cons</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_singleton_sync_eq2"><span class="id" title="lemma">proj_trace_singleton_sync_eq2</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_subseteq"><span class="id" title="lemma">fupd_mask_subseteq</span></a> (<span class="id" title="var">Ns</span> <span class="id" title="var">n2</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <span class="id" title="var">Ns</span> <span class="id" title="var">n1</span>)) <span class="id" title="keyword">as</span> "Close1". { <span class="id" title="var">solve_ndisj</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;GENERAL&nbsp;PROOF&nbsp;STEP:&nbsp;apply&nbsp;the&nbsp;WP&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n2</span></span>&nbsp;(output)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"WP2" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "SI2"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Cont2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_frame_r"><span class="id" title="lemma">fupd_mask_frame_r</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Cont2"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Cont2". { <span class="id" title="var">solve_ndisj</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#left_id_L"><span class="id" title="lemma">left_id_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;GENERAL&nbsp;PROOF&nbsp;STEP:&nbsp;apply&nbsp;the&nbsp;WP&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n1</span></span>&nbsp;(input)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"WP1" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "SI1"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Cont1".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">x_i</span>) "Hαi".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>. { <span class="comment">(*&nbsp;not&nbsp;handling&nbsp;non-stuckness&nbsp;*)</span> <span class="id" title="var">done</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">e2</span> [<span class="id" title="var">tr2</span> σ2] <span class="id" title="var">efs</span> <span class="id" title="var">STEP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;inversion&nbsp;of&nbsp;STEP&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">label_e'</span> &amp; <span class="id" title="var">label_src'</span> &amp; -&gt; &amp; -&gt; &amp; -&gt; &amp; <span class="id" title="var">STEP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hκs</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hκs</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">label_e'</span> <span class="id" title="var">label_src'</span> <span class="id" title="var">κs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">label_e</span> <span class="id" title="keyword">as</span> [|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">STEP</span>. <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">STEP</span>|<span class="id" title="var">STEP</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">STEP</span>. <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">c1</span> &amp; <span class="id" title="var">c2</span> &amp; ? &amp; <span class="id" title="var">el1</span> &amp; <span class="id" title="var">el2</span> &amp; <span class="id" title="var">e1'</span> &amp; <span class="id" title="var">e2'</span> &amp; <span class="id" title="var">sc1'</span> &amp; <span class="id" title="var">sc2'</span> &amp; <span class="id" title="var">STEP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">EqS</span> &amp; <span class="id" title="var">CAN</span> &amp; <span class="id" title="var">PRIM1</span> &amp; <span class="id" title="var">STEP1</span> &amp; <span class="id" title="var">PRIM2</span> &amp; <span class="id" title="var">STEP2</span> &amp; -&gt; &amp; -&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.sync_inj_1"><span class="id" title="lemma">sync_inj_1</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqS</span>) <span class="id" title="keyword">as</span> []. <span class="id" title="tactic">subst</span> <span class="id" title="var">c1</span> <span class="id" title="var">c2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.sync_inj_2"><span class="id" title="instance">sync_inj_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EqS</span> <span class="id" title="keyword">as</span> [-&gt; -&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;end&nbsp;inversion&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Cont2" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">x_i</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "(Hαi [%//])"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (?) "Cont2".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">tr_p'</span> := (<span class="id" title="var">tr_p</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="notation">[</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.Sync"><span class="id" title="constructor">Sync</span></a> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">el1</span> <span class="id" title="var">el2</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Cont2" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">e2'</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace"><span class="id" title="definition">proj_trace</span></a> <span class="id" title="var">tr_p'</span> <span class="id" title="var">n2</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">sc2'</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[%]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">x_o_2</span>) "[Hαo2 Cont2]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /=. <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">el2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_app"><span class="id" title="lemma">proj_trace_app</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_singleton_sync_eq2"><span class="id" title="lemma">proj_trace_singleton_sync_eq2</span></a>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;invoking&nbsp;linking&nbsp;transformation&nbsp;of&nbsp;resources,&nbsp;to&nbsp;turn<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output&nbsp;post-cond&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n2</span></span>&nbsp;into&nbsp;input&nbsp;pre-cond&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n1</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.all_sync_input_output"><span class="id" title="method">all_sync_input_output</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">CAN</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hαo2"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">x_i_1</span>) "(Hαi1 &amp; Hαβ)".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;feed&nbsp;the&nbsp;input&nbsp;pre-cond&nbsp;to&nbsp;<span class="inlinecode"><span class="id" title="var">n1</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Cont1" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">x_i_1</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "Hαi1"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (?) "Cont1".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Cont1" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">e1'</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace"><span class="id" title="definition">proj_trace</span></a> <span class="id" title="var">tr_p'</span> <span class="id" title="var">n1</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">sc1'</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[%]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">x_o_1</span>) "[Hαo1 Cont1]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /=. <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">el1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_app"><span class="id" title="lemma">proj_trace_app</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_singleton_sync_eq1"><span class="id" title="lemma">proj_trace_singleton_sync_eq1</span></a>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">x_o_1</span>. <span class="id" title="var">iSplitL</span> "Hαo1". { <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;trimming&nbsp;laters&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.all_no_extra_later"><span class="id" title="method">all_no_extra_later</span></a> <span class="id" title="var">n1</span>) (<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.all_no_extra_later"><span class="id" title="method">all_no_extra_later</span></a> <span class="id" title="var">n2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "Cont2". <span class="id" title="var">iIntros</span> "!&gt; !&gt;". <span class="id" title="var">iMod</span> "Cont2". <span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iSimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "Cont1". <span class="id" title="var">iIntros</span> "!&gt; !&gt;". <span class="id" title="var">iMod</span> "Cont1". <span class="id" title="var">iIntros</span> "!&gt;".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">y_o</span>) "Hβo".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Cont1" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hβo"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">y_i_1</span>) "(Hβi1 &amp; SI1 &amp; WP1 &amp; ?)".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;invoking&nbsp;linking&nbsp;transformation&nbsp;of&nbsp;resources,&nbsp;to&nbsp;turn<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input&nbsp;post-cond&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n1</span></span>&nbsp;into&nbsp;output&nbsp;post-cond&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n2</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hαβ" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hβi1"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">y_o_2</span>) "Hβo2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Cont2" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hβo2"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Cont2".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_frame_r"><span class="id" title="lemma">fupd_mask_frame_r</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> (<span class="id" title="var">Ns</span> <span class="id" title="var">n2</span>) (<span class="id" title="var">Ns</span> <span class="id" title="var">n1</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Cont2"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Cont2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">solve_ndisj</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#left_id_L"><span class="id" title="lemma">left_id_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "Cont2" <span class="id" title="keyword">as</span> (<span class="id" title="var">y_i_2</span>) "(Hβi2 &amp; SI2 &amp; WP2 &amp; ?)".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "Close1" <span class="id" title="keyword">as</span> "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;return&nbsp;the&nbsp;output&nbsp;post-cond&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n2</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">y_i_2</span>. <span class="id" title="var">iSplitL</span> "Hβi2". { <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;re-establishing&nbsp;<span class="inlinecode"><span class="id" title="var">state_interp</span></span>s&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "FULLTR SI1 SI2 SIs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#length_nil"><span class="id" title="definition">length_nil</span></a> !<span class="id" title="lemma">Nat.add_0_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "FULLTR". { <span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">app_assoc</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL1</span>). <span class="id" title="var">iSplitL</span> "SI1".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fin_prod.lookup_update_ne</span> // <span class="id" title="lemma">fin_prod.lookup_update_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "SI1". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL2</span>). <span class="id" title="var">iSplitL</span> "SI2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fin_prod.lookup_update_eq</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "SI2". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_mono"><span class="id" title="lemma">big_sepS_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "SIs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nk</span> [[<span class="id" title="var">Eqnk</span> ?%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#not_elem_of_singleton"><span class="id" title="lemma">not_elem_of_singleton</span></a>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_difference"><span class="id" title="method">elem_of_difference</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#not_elem_of_singleton"><span class="id" title="lemma">not_elem_of_singleton</span></a>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_difference"><span class="id" title="method">elem_of_difference</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fin_prod.lookup_update_ne</span>; [|<span class="id" title="var">done</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_app"><span class="id" title="lemma">proj_trace_app</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_cons"><span class="id" title="lemma">proj_trace_cons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">tr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.lang.html#Compose.proj_trace_singleton_sync_ne"><span class="id" title="lemma">proj_trace_singleton_sync_ne</span></a> // <span class="id" title="lemma">app_nil_l</span> <span class="id" title="lemma">app_nil_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;applying&nbsp;the&nbsp;induction&nbsp;hypothesis&nbsp;for&nbsp;the&nbsp;next&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "IH".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL1</span>). <span class="id" title="var">iSplitL</span> "WP1".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.convert_wp_wpc"><span class="id" title="lemma">convert_wp_wpc</span></a> <span class="id" title="lemma">fin_prod.lookup_update_ne</span> //<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="lemma">fin_prod.lookup_update_eq</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span> "WP1". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_delete"><span class="id" title="lemma">big_sepS_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">EqL2</span>). <span class="id" title="var">iSplitL</span> "WP2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.convert_wp_wpc"><span class="id" title="lemma">convert_wp_wpc</span></a> <span class="id" title="lemma">fin_prod.lookup_update_eq</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span> "WP2". }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepS_mono"><span class="id" title="lemma">big_sepS_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "WPs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nk</span> [[<span class="id" title="var">Eqnk</span> ?%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#not_elem_of_singleton"><span class="id" title="lemma">not_elem_of_singleton</span></a>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_difference"><span class="id" title="method">elem_of_difference</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#not_elem_of_singleton"><span class="id" title="lemma">not_elem_of_singleton</span></a>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_difference"><span class="id" title="method">elem_of_difference</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -2!<a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.convert_wp_wpc"><span class="id" title="lemma">convert_wp_wpc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fin_prod.lookup_update_ne</span>; [|<span class="id" title="var">done</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config.with_wps"><span class="id" title="section">with_wps</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose.with_config"><span class="id" title="section">with_config</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bluerock.iris.extra.wp_io.wp_io_compose.html#wp_compose"><span class="id" title="module">wp_compose</span></a>.<br/>
</div>
<!--
-- Copyright (c) 2020 BlueRock Security, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
