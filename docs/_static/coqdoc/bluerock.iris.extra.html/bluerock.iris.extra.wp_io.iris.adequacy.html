<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
-- Copyright (c) 2020 BlueRock Security, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="../../css/coqdocjs/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="../../css/coqdocjs/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../js/coqdocjs/config.js"></script>
<script type="text/javascript" src="../../js/coqdocjs/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <!-- NOTE: These are displayed right to left on the page -->
    <span class="right">
      <a href="./indexpage.html"> Index for the theory </a>
      <a href="./toc.html"> Table of contents for the theory </a>
      <a href="../../../index.html"> Toplevel </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">bluerock.iris.extra.wp_io.iris.adequacy</h1>

<div class="code">
<span class="comment">(*<br/>
&nbsp;*&nbsp;Copyright&nbsp;(c)&nbsp;2023&nbsp;BlueRock&nbsp;Security,&nbsp;Inc.<br/>
&nbsp;*<br/>
&nbsp;*&nbsp;This&nbsp;software&nbsp;is&nbsp;distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;BedRock&nbsp;Open-Source&nbsp;License.<br/>
&nbsp;*&nbsp;See&nbsp;the&nbsp;LICENSE-BedRock&nbsp;file&nbsp;in&nbsp;the&nbsp;repository&nbsp;root&nbsp;for&nbsp;details.<br/>
<br/>
&nbsp;*&nbsp;ALL&nbsp;of&nbsp;the&nbsp;following&nbsp;code&nbsp;is&nbsp;derived&nbsp;from&nbsp;code&nbsp;original&nbsp;to&nbsp;the<br/>
&nbsp;*&nbsp;Iris&nbsp;project.&nbsp;That&nbsp;original&nbsp;code&nbsp;is<br/>
&nbsp;*<br/>
&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Copyright&nbsp;Iris&nbsp;developers&nbsp;and&nbsp;contributors<br/>
&nbsp;*<br/>
&nbsp;*&nbsp;and&nbsp;used&nbsp;according&nbsp;to&nbsp;the&nbsp;following&nbsp;license.<br/>
&nbsp;*<br/>
&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SPDX-License-Identifier:&nbsp;BSD-3-Clause<br/>
&nbsp;*<br/>
&nbsp;*&nbsp;Original&nbsp;Iris&nbsp;License:<br/>
&nbsp;*&nbsp;https://gitlab.mpi-sws.org/iris/iris/-/blob/cb324b81f5b00a7cb8ae186d7aca5011350037cd/LICENSE-CODE<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
This generalize <span class="inlinecode"><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.adequacy.html#"><span class="id" title="library">iris.program_logic.adequacy</span></a></span> for PROP.

<div class="paragraph"> </div>

This is ignoring later credits (£).

<div class="paragraph"> </div>

TODO : upstream.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.gmap.html#"><span class="id" title="library">iris.algebra.gmap</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#"><span class="id" title="library">iris.algebra.auth</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#"><span class="id" title="library">iris.algebra.agree</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.gset.html#"><span class="id" title="library">iris.algebra.gset</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.coPset.html#"><span class="id" title="library">iris.algebra.coPset</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bluerock.iris.extra.proofmode.proofmode.html#"><span class="id" title="library">bluerock.iris.extra.proofmode.proofmode</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.adequacy.html#"><span class="id" title="library">iris.program_logic.adequacy</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.weakestpre.html#"><span class="id" title="library">bluerock.iris.extra.wp_io.iris.weakestpre</span></a>.<br/>

<br/>
</div>

<div class="doc">
This file contains the adequacy statements of the Iris program logic. First
we prove a number of auxilary results. 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="adequacy" class="idref" href="#adequacy"><span class="id" title="section">adequacy</span></a>.<br/>
<span class="id" title="keyword">Context</span> {<a id="2289e4f0692abff008e780da6eb91015" class="idref" href="#2289e4f0692abff008e780da6eb91015"><span class="id" title="variable">Λ</span></a>} {<a id="adequacy.PROP" class="idref" href="#adequacy.PROP"><span class="id" title="variable">PROP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi"><span class="id" title="record">bi</span></a>} `{!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#BiFUpd"><span class="id" title="class">BiFUpd</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#PROP:2"><span class="id" title="variable">PROP</span></a>} `{!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.extensions.html#BiLaterContractive"><span class="id" title="class">BiLaterContractive</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#PROP:2"><span class="id" title="variable">PROP</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{!<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#irisGS_gen"><span class="id" title="class">irisGS_gen</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#aed330fafc52497700df4a17b24e754e"><span class="id" title="variable">Λ</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#PROP:2"><span class="id" title="variable">PROP</span></a>}.<br/>

<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">e</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#2289e4f0692abff008e780da6eb91015"><span class="id" title="variable">Λ</span></a>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#adequacy.PROP"><span class="id" title="variable">PROP</span></a>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">Φ</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#2289e4f0692abff008e780da6eb91015"><span class="id" title="variable">Λ</span></a> <span class="id" title="notation">→</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#adequacy.PROP"><span class="id" title="variable">PROP</span></a>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">Φs</span> : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#2289e4f0692abff008e780da6eb91015"><span class="id" title="variable">Λ</span></a> <span class="id" title="notation">→</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#adequacy.PROP"><span class="id" title="variable">PROP</span></a>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="wptp" class="idref" href="#wptp"><span class="id" title="abbreviation">wptp</span></a> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">Φs</span> := (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">]</span></a> <a id="e:6" class="idref" href="#e:6"><span class="id" title="binder"><span id="e:7" class="id">e</span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">;</span></a><a id="ddd74b3e5ac7acdccfa97dcaa59e83fe" class="idref" href="#ddd74b3e5ac7acdccfa97dcaa59e83fe"><span class="id" title="binder"><span id="a9416b11fdefd93ae0cbfacc7b087883" class="id">Φ</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">∈</span></a> <span class="id" title="var">t</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">;</span></a><span class="id" title="var">Φs</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">WP</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e:6"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">@</span></a> <span class="id" title="var">s</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">{{</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ddd74b3e5ac7acdccfa97dcaa59e83fe"><span class="id" title="variable">Φ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="wp_step" class="idref" href="#wp_step"><span class="id" title="lemma">wp_step</span></a> <a id="s:10" class="idref" href="#s:10"><span class="id" title="binder">s</span></a> <a id="e1:11" class="idref" href="#e1:11"><span class="id" title="binder">e1</span></a> <a id="9e59fb199fbb2b2392131102439951f5" class="idref" href="#9e59fb199fbb2b2392131102439951f5"><span class="id" title="binder">σ1</span></a> <a id="ns:13" class="idref" href="#ns:13"><span class="id" title="binder">ns</span></a> <a id="ab2a46fed6985a1fe73c8c23ef3c0919" class="idref" href="#ab2a46fed6985a1fe73c8c23ef3c0919"><span class="id" title="binder">κ</span></a> <a id="f89bffc2992026be1e41d94be9d6d392" class="idref" href="#f89bffc2992026be1e41d94be9d6d392"><span class="id" title="binder">κs</span></a> <a id="e2:16" class="idref" href="#e2:16"><span class="id" title="binder">e2</span></a> <a id="1d4ed66af5e6ad61f160673a374ce61f" class="idref" href="#1d4ed66af5e6ad61f160673a374ce61f"><span class="id" title="binder">σ2</span></a> <a id="efs:18" class="idref" href="#efs:18"><span class="id" title="binder">efs</span></a> <a id="nt:19" class="idref" href="#nt:19"><span class="id" title="binder">nt</span></a> <a id="285a825432ce9655d75e70d7f57d697e" class="idref" href="#285a825432ce9655d75e70d7f57d697e"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e1:11"><span class="id" title="variable">e1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#9e59fb199fbb2b2392131102439951f5"><span class="id" title="variable">σ1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ab2a46fed6985a1fe73c8c23ef3c0919"><span class="id" title="variable">κ</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e2:16"><span class="id" title="variable">e2</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#1d4ed66af5e6ad61f160673a374ce61f"><span class="id" title="variable">σ2</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#efs:18"><span class="id" title="variable">efs</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#state_interp"><span class="id" title="method">state_interp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#9e59fb199fbb2b2392131102439951f5"><span class="id" title="variable">σ1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:13"><span class="id" title="variable">ns</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ab2a46fed6985a1fe73c8c23ef3c0919"><span class="id" title="variable">κ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#f89bffc2992026be1e41d94be9d6d392"><span class="id" title="variable">κs</span></a>) <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt:19"><span class="id" title="variable">nt</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;£&nbsp;(S&nbsp;(num_laters_per_step&nbsp;ns))&nbsp;-∗&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">WP</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e1:11"><span class="id" title="variable">e1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">@</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#s:10"><span class="id" title="variable">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">{{</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#285a825432ce9655d75e70d7f57d697e"><span class="id" title="variable">Φ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">}=∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">}▷=&gt;^(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#num_laters_per_step"><span class="id" title="method">num_laters_per_step</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:13"><span class="id" title="variable">ns</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">}=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#state_interp"><span class="id" title="method">state_interp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#1d4ed66af5e6ad61f160673a374ce61f"><span class="id" title="variable">σ2</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:13"><span class="id" title="variable">ns</span></a>) <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#f89bffc2992026be1e41d94be9d6d392"><span class="id" title="variable">κs</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt:19"><span class="id" title="variable">nt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#efs:18"><span class="id" title="variable">efs</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">WP</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e2:16"><span class="id" title="variable">e2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">@</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#s:10"><span class="id" title="variable">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">{{</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#285a825432ce9655d75e70d7f57d697e"><span class="id" title="variable">Φ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">}}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wptp"><span class="id" title="abbreviation">wptp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#s:10"><span class="id" title="variable">s</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#efs:18"><span class="id" title="variable">efs</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#replicate"><span class="id" title="definition">replicate</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#efs:18"><span class="id" title="variable">efs</span></a>) <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#fork_post"><span class="id" title="method">fork_post</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}<a class="idref" href="bluerock.iris.extra.wp_io.iris.weakestpre.html#wp_unfold"><span class="id" title="lemma">wp_unfold</span></a> /<a class="idref" href="bluerock.iris.extra.wp_io.iris.weakestpre.html#wp_pre"><span class="id" title="definition">wp_pre</span></a>. <span class="id" title="var">iIntros</span> (?) "Hσ H".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val_stuck"><span class="id" title="lemma">val_stuck</span></a> <span class="id" title="var">e1</span> σ1 <span class="id" title="var">κ</span> <span class="id" title="var">e2</span> σ2 <span class="id" title="var">efs</span>) //.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"H" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> σ1 <span class="id" title="var">ns</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "Hσ"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "(_ &amp; H)". <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#step_fupdN_wand"><span class="id" title="lemma">step_fupdN_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "(H [//])"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iIntros</span> "&gt;H !&gt;".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">Nat.add_comm</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_replicate_r"><span class="id" title="lemma">big_sepL2_replicate_r</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="wptp_step" class="idref" href="#wptp_step"><span class="id" title="lemma">wptp_step</span></a> <a id="s:21" class="idref" href="#s:21"><span class="id" title="binder">s</span></a> <a id="es1:22" class="idref" href="#es1:22"><span class="id" title="binder">es1</span></a> <a id="es2:23" class="idref" href="#es2:23"><span class="id" title="binder">es2</span></a> <a id="4b9f9ac5f1299e7c470f32a6c1ad8c02" class="idref" href="#4b9f9ac5f1299e7c470f32a6c1ad8c02"><span class="id" title="binder">κ</span></a> <a id="4996adadd1b5aff91ef811e216587569" class="idref" href="#4996adadd1b5aff91ef811e216587569"><span class="id" title="binder">κs</span></a> <a id="4bea4ddb7b3c21270976533105474ca9" class="idref" href="#4bea4ddb7b3c21270976533105474ca9"><span class="id" title="binder">σ1</span></a> <a id="ns:27" class="idref" href="#ns:27"><span class="id" title="binder">ns</span></a> <a id="4eb03ffe35161203a5332f424f23fc49" class="idref" href="#4eb03ffe35161203a5332f424f23fc49"><span class="id" title="binder">σ2</span></a> <a id="53a3fd299d0be17a43a603f3c2e707f2" class="idref" href="#53a3fd299d0be17a43a603f3c2e707f2"><span class="id" title="binder">Φs</span></a> <a id="nt:30" class="idref" href="#nt:30"><span class="id" title="binder">nt</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#step"><span class="id" title="inductive">step</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es1:22"><span class="id" title="variable">es1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#4bea4ddb7b3c21270976533105474ca9"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#4b9f9ac5f1299e7c470f32a6c1ad8c02"><span class="id" title="variable">κ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es2:23"><span class="id" title="variable">es2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#4eb03ffe35161203a5332f424f23fc49"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#state_interp"><span class="id" title="method">state_interp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#4bea4ddb7b3c21270976533105474ca9"><span class="id" title="variable">σ1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:27"><span class="id" title="variable">ns</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#4b9f9ac5f1299e7c470f32a6c1ad8c02"><span class="id" title="variable">κ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#4996adadd1b5aff91ef811e216587569"><span class="id" title="variable">κs</span></a>) <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt:30"><span class="id" title="variable">nt</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;£&nbsp;(S&nbsp;(num_laters_per_step&nbsp;ns))&nbsp;-∗&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wptp"><span class="id" title="abbreviation">wptp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#s:21"><span class="id" title="variable">s</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es1:22"><span class="id" title="variable">es1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#53a3fd299d0be17a43a603f3c2e707f2"><span class="id" title="variable">Φs</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="nt':31" class="idref" href="#nt':31"><span class="id" title="binder">nt'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">}▷=&gt;^(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#num_laters_per_step"><span class="id" title="method">num_laters_per_step</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:27"><span class="id" title="variable">ns</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">}=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#state_interp"><span class="id" title="method">state_interp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#4eb03ffe35161203a5332f424f23fc49"><span class="id" title="variable">σ2</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:27"><span class="id" title="variable">ns</span></a>) <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#4996adadd1b5aff91ef811e216587569"><span class="id" title="variable">κs</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt:30"><span class="id" title="variable">nt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt':31"><span class="id" title="variable">nt'</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wptp"><span class="id" title="abbreviation">wptp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#s:21"><span class="id" title="variable">s</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es2:23"><span class="id" title="variable">es2</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#53a3fd299d0be17a43a603f3c2e707f2"><span class="id" title="variable">Φs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#replicate"><span class="id" title="definition">replicate</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt':31"><span class="id" title="variable">nt'</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#fork_post"><span class="id" title="method">fork_post</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hstep</span>) "Hσ Ht".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hstep</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e1'</span> σ1' <span class="id" title="var">e2'</span> σ2' <span class="id" title="var">efs</span> <span class="id" title="var">t2'</span> <span class="id" title="var">t3</span> <span class="id" title="var">Hstep</span>]; <span class="id" title="var">simplify_eq</span>/=.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_app_inv_l"><span class="id" title="lemma">big_sepL2_app_inv_l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Ht"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">Φs1</span> <span class="id" title="var">Φs2</span> -&gt;) "[? Ht]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_cons_inv_l"><span class="id" title="lemma">big_sepL2_cons_inv_l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Ht"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">Φ</span> <span class="id" title="var">Φs3</span> -&gt;) "[Ht ?]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wp_step"><span class="id" title="lemma">wp_step</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hσ Ht"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "H"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>. <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#step_fupdN_wand"><span class="id" title="lemma">step_fupdN_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iIntros</span> "&gt;($ &amp; He2 &amp; Hefs) !&gt;".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#assoc_L"><span class="id" title="lemma">assoc_L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#app"><span class="id" title="definition">app</span></a>) -<span class="id" title="lemma">app_comm_cons</span>. <span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;The&nbsp;total&nbsp;number&nbsp;of&nbsp;laters&nbsp;used&nbsp;between&nbsp;the&nbsp;physical&nbsp;steps&nbsp;number<br/>
&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">start</span></span>&nbsp;(included)&nbsp;to&nbsp;<span class="inlinecode"><span class="id" title="var">start</span>+<span class="id" title="var">ns</span></span>&nbsp;(excluded).&nbsp;*)</span><br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Fixpoint</span> <a id="steps_sum" class="idref" href="#steps_sum"><span class="id" title="definition">steps_sum</span></a> (<a id="num_laters_per_step:32" class="idref" href="#num_laters_per_step:32"><span class="id" title="binder">num_laters_per_step</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="notation">→</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="start:33" class="idref" href="#start:33"><span class="id" title="binder">start</span></a> <a id="ns:34" class="idref" href="#ns:34"><span class="id" title="binder">ns</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:34"><span class="id" title="variable">ns</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> =&gt; 0<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">ns</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#num_laters_per_step:32"><span class="id" title="variable">num_laters_per_step</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#start:33"><span class="id" title="variable">start</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#steps_sum:35"><span class="id" title="definition">steps_sum</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#num_laters_per_step:32"><span class="id" title="variable">num_laters_per_step</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#start:33"><span class="id" title="variable">start</span></a>) <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:34"><span class="id" title="variable">ns</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="wptp_preservation" class="idref" href="#wptp_preservation"><span class="id" title="lemma">wptp_preservation</span></a> <a id="s:37" class="idref" href="#s:37"><span class="id" title="binder">s</span></a> <a id="n:38" class="idref" href="#n:38"><span class="id" title="binder">n</span></a> <a id="es1:39" class="idref" href="#es1:39"><span class="id" title="binder">es1</span></a> <a id="es2:40" class="idref" href="#es2:40"><span class="id" title="binder">es2</span></a> <a id="981cc820d415c8fb1393daa885351740" class="idref" href="#981cc820d415c8fb1393daa885351740"><span class="id" title="binder">κs</span></a> <a id="49aff4b458ff57aadaf1d7cd33605919" class="idref" href="#49aff4b458ff57aadaf1d7cd33605919"><span class="id" title="binder">κs'</span></a> <a id="6b18992395485c946ac92515dc30c317" class="idref" href="#6b18992395485c946ac92515dc30c317"><span class="id" title="binder">σ1</span></a> <a id="ns:44" class="idref" href="#ns:44"><span class="id" title="binder">ns</span></a> <a id="ac25b4abd272e4e539466b01b3ea7b09" class="idref" href="#ac25b4abd272e4e539466b01b3ea7b09"><span class="id" title="binder">σ2</span></a> <a id="2984801b5aa5c5fdf5f3f64d7f1a414b" class="idref" href="#2984801b5aa5c5fdf5f3f64d7f1a414b"><span class="id" title="binder">Φs</span></a> <a id="nt:47" class="idref" href="#nt:47"><span class="id" title="binder">nt</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#nsteps"><span class="id" title="inductive">nsteps</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#n:38"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es1:39"><span class="id" title="variable">es1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#6b18992395485c946ac92515dc30c317"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#981cc820d415c8fb1393daa885351740"><span class="id" title="variable">κs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es2:40"><span class="id" title="variable">es2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ac25b4abd272e4e539466b01b3ea7b09"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#state_interp"><span class="id" title="method">state_interp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#6b18992395485c946ac92515dc30c317"><span class="id" title="variable">σ1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:44"><span class="id" title="variable">ns</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#981cc820d415c8fb1393daa885351740"><span class="id" title="variable">κs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#49aff4b458ff57aadaf1d7cd33605919"><span class="id" title="variable">κs'</span></a>) <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt:47"><span class="id" title="variable">nt</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;£&nbsp;(steps_sum&nbsp;num_laters_per_step&nbsp;ns&nbsp;n)&nbsp;-∗&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wptp"><span class="id" title="abbreviation">wptp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#s:37"><span class="id" title="variable">s</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es1:39"><span class="id" title="variable">es1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#2984801b5aa5c5fdf5f3f64d7f1a414b"><span class="id" title="variable">Φs</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">}=∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">}▷=&gt;^(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#steps_sum"><span class="id" title="definition">steps_sum</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#num_laters_per_step"><span class="id" title="method">num_laters_per_step</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:44"><span class="id" title="variable">ns</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#n:38"><span class="id" title="variable">n</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="nt':48" class="idref" href="#nt':48"><span class="id" title="binder">nt'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#state_interp"><span class="id" title="method">state_interp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ac25b4abd272e4e539466b01b3ea7b09"><span class="id" title="variable">σ2</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#n:38"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:44"><span class="id" title="variable">ns</span></a>) <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#49aff4b458ff57aadaf1d7cd33605919"><span class="id" title="variable">κs'</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt:47"><span class="id" title="variable">nt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt':48"><span class="id" title="variable">nt'</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wptp"><span class="id" title="abbreviation">wptp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#s:37"><span class="id" title="variable">s</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es2:40"><span class="id" title="variable">es2</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#2984801b5aa5c5fdf5f3f64d7f1a414b"><span class="id" title="variable">Φs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#replicate"><span class="id" title="definition">replicate</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt':48"><span class="id" title="variable">nt'</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#fork_post"><span class="id" title="method">fork_post</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">nt</span> <span class="id" title="var">es1</span> <span class="id" title="var">es2</span> <span class="id" title="var">κs</span> <span class="id" title="var">κs'</span> σ1 <span class="id" title="var">ns</span> σ2 <span class="id" title="var">Φs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n</span> <span class="id" title="var">IH</span>]=&gt; <span class="id" title="var">nt</span> <span class="id" title="var">es1</span> <span class="id" title="var">es2</span> <span class="id" title="var">κs</span> <span class="id" title="var">κs'</span> σ1 <span class="id" title="var">ns</span> σ2 <span class="id" title="var">Φs</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">inversion_clear</span> 1; <span class="id" title="var">iIntros</span> "? ?"; <span class="id" title="var">iExists</span> 0=&gt; /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">Nat.add_0_r</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#right_id_L"><span class="id" title="lemma">right_id_L</span></a>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_subseteq"><span class="id" title="lemma">fupd_mask_subseteq</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hsteps</span>) "Hσ He". <span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Hsteps</span> <span class="id" title="keyword">as</span> [|?? [<span class="id" title="var">t1'</span> σ1']].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#assoc_L"><span class="id" title="lemma">assoc_L</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#7770bdd5b9dc991889cccd513e8a2006"><span class="id" title="notation">(++)</span></a>) /= <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Nat.iter_add"><span class="id" title="lemma">Nat.iter_add</span></a> -{1}<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Peano.html#plus_Sn_m"><span class="id" title="lemma">plus_Sn_m</span></a> /= <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Peano.html#plus_n_Sm"><span class="id" title="lemma">plus_n_Sm</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;rewrite&nbsp;lc_split.&nbsp;iDestruct&nbsp;"Hcred"&nbsp;as&nbsp;"<span class="inlinecode"><span class="id" title="var">Hc1</span></span> <span class="inlinecode"><span class="id" title="var">Hc2</span></span>".&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wptp_step"><span class="id" title="lemma">wptp_step</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hσ He"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">nt'</span>) "&gt;H"; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#step_fupdN_S_fupd"><span class="id" title="lemma">step_fupdN_S_fupd</span></a>. <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#step_fupdN_wand"><span class="id" title="lemma">step_fupdN_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "&gt;(Hσ &amp; He)". <span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><span class="id" title="var">IH</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hσ He"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "IH"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>. <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#step_fupdN_wand"><span class="id" title="lemma">step_fupdN_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "IH"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iIntros</span> "&gt;IH".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "IH" <span class="id" title="keyword">as</span> (<span class="id" title="var">nt''</span>) "[??]".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">Nat.add_assoc</span> -(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#assoc_L"><span class="id" title="lemma">assoc_L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#app"><span class="id" title="definition">app</span></a>) -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#replicate_add"><span class="id" title="lemma">replicate_add</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="wp_not_stuck" class="idref" href="#wp_not_stuck"><span class="id" title="lemma">wp_not_stuck</span></a> <a id="e73ad9de769ea8215617e27551ab4173" class="idref" href="#e73ad9de769ea8215617e27551ab4173"><span class="id" title="binder">κs</span></a> <a id="nt:50" class="idref" href="#nt:50"><span class="id" title="binder">nt</span></a> <a id="e:51" class="idref" href="#e:51"><span class="id" title="binder">e</span></a> <a id="193018d7d3b117e3eea7635a6f1d98b6" class="idref" href="#193018d7d3b117e3eea7635a6f1d98b6"><span class="id" title="binder">σ</span></a> <a id="ns:53" class="idref" href="#ns:53"><span class="id" title="binder">ns</span></a> <a id="b62930ba920d094619afe8ef0203354e" class="idref" href="#b62930ba920d094619afe8ef0203354e"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#state_interp"><span class="id" title="method">state_interp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#193018d7d3b117e3eea7635a6f1d98b6"><span class="id" title="variable">σ</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:53"><span class="id" title="variable">ns</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e73ad9de769ea8215617e27551ab4173"><span class="id" title="variable">κs</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt:50"><span class="id" title="variable">nt</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#7cc0c88f7179b685cc79734f30ca004b"><span class="id" title="notation">WP</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e:51"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#7cc0c88f7179b685cc79734f30ca004b"><span class="id" title="notation">{{</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#b62930ba920d094619afe8ef0203354e"><span class="id" title="variable">Φ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#7cc0c88f7179b685cc79734f30ca004b"><span class="id" title="notation">}}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">}=∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#not_stuck"><span class="id" title="definition">not_stuck</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e:51"><span class="id" title="variable">e</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#193018d7d3b117e3eea7635a6f1d98b6"><span class="id" title="variable">σ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.weakestpre.html#wp_unfold"><span class="id" title="lemma">wp_unfold</span></a> /<a class="idref" href="bluerock.iris.extra.wp_io.iris.weakestpre.html#wp_pre"><span class="id" title="definition">wp_pre</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#not_stuck"><span class="id" title="definition">not_stuck</span></a>. <span class="id" title="var">iIntros</span> "Hσ H".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <span class="id" title="var">e</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span>|] <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iMod</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_subseteq"><span class="id" title="lemma">fupd_mask_subseteq</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>); <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"H" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> σ <span class="id" title="var">ns</span> <span class="id" title="notation">[]</span> <span class="id" title="var">κs</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "Hσ"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[% He]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The adequacy statement of Iris consists of two parts:
      (1) the postcondition for all threads that have terminated in values
      and (2) progress (i.e., after n steps the program is not stuck).
    For an n-step execution of a thread pool, the two parts are given by
    <span class="inlinecode"><span class="id" title="var">wptp_strong_adequacy</span></span> and <span class="inlinecode"><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wptp_progress"><span class="id" title="lemma">wptp_progress</span></a></span> below.

<div class="paragraph"> </div>

    For the final adequacy theorem of Iris, <span class="inlinecode"><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wp_strong_adequacy_gen"><span class="id" title="lemma">wp_strong_adequacy_gen</span></a></span>, we would
    like to instantiate the Iris proof (i.e., instantiate the
    <span class="inlinecode">∀</span> <span class="inlinecode">{<span class="id" title="var">Hinv</span></span> <span class="inlinecode">:</span> <span class="inlinecode">!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.fancy_updates.html#invGS_gen"><span class="id" title="class">invGS_gen</span></a></span> <span class="inlinecode"><span class="id" title="var">hlc</span></span> <span class="inlinecode"><a class="idref" href="bluerock.iris.extra.base_logic.lib.spectra_iprop.html#71c70b7af451fb4df6504dcb5162cf9d"><span class="id" title="variable">Σ</span></a>}</span> <span class="inlinecode"><span class="id" title="var">κs</span>,</span> <span class="inlinecode">...</span>) and then use both lemmas to get
    progress and the postconditions. Unfortunately, since the addition of later
    credits, this is no longer possible, because the original proof relied on an
    interaction of the update modality and plain propositions. So instead, we
    employ a trick: we duplicate the instantiation of the Iris proof, such
    that we can "run the WP proof twice". That is, we instantiate the
    <span class="inlinecode">∀</span> <span class="inlinecode">{<span class="id" title="var">Hinv</span></span> <span class="inlinecode">:</span> <span class="inlinecode">!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.fancy_updates.html#invGS_gen"><span class="id" title="class">invGS_gen</span></a></span> <span class="inlinecode"><span class="id" title="var">hlc</span></span> <span class="inlinecode"><a class="idref" href="bluerock.iris.extra.base_logic.lib.spectra_iprop.html#71c70b7af451fb4df6504dcb5162cf9d"><span class="id" title="variable">Σ</span></a>}</span> <span class="inlinecode"><span class="id" title="var">κs</span>,</span> <span class="inlinecode">...</span> both in <span class="inlinecode"><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wp_progress_gen"><span class="id" title="lemma">wp_progress_gen</span></a></span> and
    <span class="inlinecode"><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wp_strong_adequacy_gen"><span class="id" title="lemma">wp_strong_adequacy_gen</span></a></span>. In doing  so, we can avoid the interactions with
    the plain modality. In <span class="inlinecode"><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wp_strong_adequacy_gen"><span class="id" title="lemma">wp_strong_adequacy_gen</span></a></span>, we can then make use of
    <span class="inlinecode"><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wp_progress_gen"><span class="id" title="lemma">wp_progress_gen</span></a></span> to prove the progress component of the main adequacy theorem.

</div>
<div class="code">

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="wptp_postconditions" class="idref" href="#wptp_postconditions"><span class="id" title="lemma">wptp_postconditions</span></a> <a id="ed062613881e94425d4c81df261f16a6" class="idref" href="#ed062613881e94425d4c81df261f16a6"><span class="id" title="binder">Φs</span></a> <a id="2bc96073c090d86cf0882475c51f2dd4" class="idref" href="#2bc96073c090d86cf0882475c51f2dd4"><span class="id" title="binder">κs'</span></a> <a id="s:57" class="idref" href="#s:57"><span class="id" title="binder">s</span></a> <a id="n:58" class="idref" href="#n:58"><span class="id" title="binder">n</span></a> <a id="es1:59" class="idref" href="#es1:59"><span class="id" title="binder">es1</span></a> <a id="es2:60" class="idref" href="#es2:60"><span class="id" title="binder">es2</span></a> <a id="f1b468dba0a4b94db521512672f3857b" class="idref" href="#f1b468dba0a4b94db521512672f3857b"><span class="id" title="binder">κs</span></a> <a id="56d5d888d8573c6e07f146d76df809f3" class="idref" href="#56d5d888d8573c6e07f146d76df809f3"><span class="id" title="binder">σ1</span></a> <a id="ns:63" class="idref" href="#ns:63"><span class="id" title="binder">ns</span></a> <a id="534020e96b74a9aaba3889e250db6e50" class="idref" href="#534020e96b74a9aaba3889e250db6e50"><span class="id" title="binder">σ2</span></a> <a id="nt:65" class="idref" href="#nt:65"><span class="id" title="binder">nt</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#nsteps"><span class="id" title="inductive">nsteps</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#n:58"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es1:59"><span class="id" title="variable">es1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#56d5d888d8573c6e07f146d76df809f3"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#f1b468dba0a4b94db521512672f3857b"><span class="id" title="variable">κs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es2:60"><span class="id" title="variable">es2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#534020e96b74a9aaba3889e250db6e50"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#state_interp"><span class="id" title="method">state_interp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#56d5d888d8573c6e07f146d76df809f3"><span class="id" title="variable">σ1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:63"><span class="id" title="variable">ns</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#f1b468dba0a4b94db521512672f3857b"><span class="id" title="variable">κs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#2bc96073c090d86cf0882475c51f2dd4"><span class="id" title="variable">κs'</span></a>) <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt:65"><span class="id" title="variable">nt</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;£&nbsp;(steps_sum&nbsp;num_laters_per_step&nbsp;ns&nbsp;n)&nbsp;-∗&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wptp"><span class="id" title="abbreviation">wptp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#s:57"><span class="id" title="variable">s</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es1:59"><span class="id" title="variable">es1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ed062613881e94425d4c81df261f16a6"><span class="id" title="variable">Φs</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">}=∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">}▷=&gt;^(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#steps_sum"><span class="id" title="definition">steps_sum</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#num_laters_per_step"><span class="id" title="method">num_laters_per_step</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:63"><span class="id" title="variable">ns</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#n:58"><span class="id" title="variable">n</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="nt':66" class="idref" href="#nt':66"><span class="id" title="binder">nt'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#state_interp"><span class="id" title="method">state_interp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#534020e96b74a9aaba3889e250db6e50"><span class="id" title="variable">σ2</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#n:58"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:63"><span class="id" title="variable">ns</span></a>) <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#2bc96073c090d86cf0882475c51f2dd4"><span class="id" title="variable">κs'</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt:65"><span class="id" title="variable">nt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt':66"><span class="id" title="variable">nt'</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">]</span></a> <a id="e:67" class="idref" href="#e:67"><span class="id" title="binder"><span id="e:68" class="id">e</span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">;</span></a><a id="69f172393263167da34f45cb2fc47c28" class="idref" href="#69f172393263167da34f45cb2fc47c28"><span class="id" title="binder"><span id="732cb7b8f82dc7819c643a2f8948d6e9" class="id">Φ</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es2:60"><span class="id" title="variable">es2</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">;</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ed062613881e94425d4c81df261f16a6"><span class="id" title="variable">Φs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#replicate"><span class="id" title="definition">replicate</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt':66"><span class="id" title="variable">nt'</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#fork_post"><span class="id" title="method">fork_post</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#from_option"><span class="id" title="definition">from_option</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#69f172393263167da34f45cb2fc47c28"><span class="id" title="variable">Φ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'True'"><span class="id" title="notation">True</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e:67"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hstep</span>) "Hσ He". <span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wptp_preservation"><span class="id" title="lemma">wptp_preservation</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hσ He"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Hwp"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#step_fupdN_wand"><span class="id" title="lemma">step_fupdN_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hwp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">nt'</span>) "(Hσ &amp; Ht)"; <span class="id" title="var">simplify_eq</span>/=.<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "Hσ".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#big_sepL2_fupd"><span class="id" title="lemma">big_sepL2_fupd</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_impl"><span class="id" title="lemma">big_sepL2_impl</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Ht"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!#" (? <span class="id" title="var">e</span> <span class="id" title="var">Φ</span> ??) "Hwp".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <span class="id" title="var">e</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v2</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">He2'</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#of_to_val"><span class="id" title="lemma">of_to_val</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He2'</span> <span class="id" title="keyword">as</span> &lt;-. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">iApply</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.weakestpre.html#wp_value_fupd'"><span class="id" title="lemma">wp_value_fupd'</span></a>. <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="wptp_progress" class="idref" href="#wptp_progress"><span class="id" title="lemma">wptp_progress</span></a> <a id="c4f8ac9cf093a8b3a048a3e099825b5a" class="idref" href="#c4f8ac9cf093a8b3a048a3e099825b5a"><span class="id" title="binder">Φs</span></a> <a id="20732699d518b6fed7ec48d5c65e6755" class="idref" href="#20732699d518b6fed7ec48d5c65e6755"><span class="id" title="binder">κs'</span></a> <a id="n:73" class="idref" href="#n:73"><span class="id" title="binder">n</span></a> <a id="es1:74" class="idref" href="#es1:74"><span class="id" title="binder">es1</span></a> <a id="es2:75" class="idref" href="#es2:75"><span class="id" title="binder">es2</span></a> <a id="096adff244eed8d0cff6ae5bef05acc2" class="idref" href="#096adff244eed8d0cff6ae5bef05acc2"><span class="id" title="binder">κs</span></a> <a id="525a5305abcce2183d4868f7400295ef" class="idref" href="#525a5305abcce2183d4868f7400295ef"><span class="id" title="binder">σ1</span></a> <a id="ns:78" class="idref" href="#ns:78"><span class="id" title="binder">ns</span></a> <a id="4ae103213f92d999cb47487726a49010" class="idref" href="#4ae103213f92d999cb47487726a49010"><span class="id" title="binder">σ2</span></a> <a id="nt:80" class="idref" href="#nt:80"><span class="id" title="binder">nt</span></a> <a id="e2:81" class="idref" href="#e2:81"><span class="id" title="binder">e2</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#nsteps"><span class="id" title="inductive">nsteps</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#n:73"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es1:74"><span class="id" title="variable">es1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#525a5305abcce2183d4868f7400295ef"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#096adff244eed8d0cff6ae5bef05acc2"><span class="id" title="variable">κs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es2:75"><span class="id" title="variable">es2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#4ae103213f92d999cb47487726a49010"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e2:81"><span class="id" title="variable">e2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es2:75"><span class="id" title="variable">es2</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#state_interp"><span class="id" title="method">state_interp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#525a5305abcce2183d4868f7400295ef"><span class="id" title="variable">σ1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:78"><span class="id" title="variable">ns</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#096adff244eed8d0cff6ae5bef05acc2"><span class="id" title="variable">κs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#20732699d518b6fed7ec48d5c65e6755"><span class="id" title="variable">κs'</span></a>) <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#nt:80"><span class="id" title="variable">nt</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;£&nbsp;(steps_sum&nbsp;num_laters_per_step&nbsp;ns&nbsp;n)&nbsp;-∗&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wptp"><span class="id" title="abbreviation">wptp</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#NotStuck"><span class="id" title="constructor">NotStuck</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es1:74"><span class="id" title="variable">es1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#c4f8ac9cf093a8b3a048a3e099825b5a"><span class="id" title="variable">Φs</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">}=∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">}▷=&gt;^(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#steps_sum"><span class="id" title="definition">steps_sum</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#num_laters_per_step"><span class="id" title="method">num_laters_per_step</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ns:78"><span class="id" title="variable">ns</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#n:73"><span class="id" title="variable">n</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#not_stuck"><span class="id" title="definition">not_stuck</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e2:81"><span class="id" title="variable">e2</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#4ae103213f92d999cb47487726a49010"><span class="id" title="variable">σ2</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hstep</span> <span class="id" title="var">Hel</span>) "Hσ He". <span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wptp_preservation"><span class="id" title="lemma">wptp_preservation</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hσ He"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Hwp"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#step_fupdN_wand"><span class="id" title="lemma">step_fupdN_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hwp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">nt'</span>) "(Hσ &amp; Ht)"; <span class="id" title="var">simplify_eq</span>/=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_lookup"><span class="id" title="lemma">elem_of_list_lookup</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hel</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> <span class="id" title="var">Hlook</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><span class="id" title="var">Φs</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#replicate"><span class="id" title="definition">replicate</span></a> <span class="id" title="var">nt'</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#fork_post"><span class="id" title="method">fork_post</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Φ</span>|] <span class="id" title="var">eqn</span>: <span class="id" title="var">Hlook2</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_alt"><span class="id" title="lemma">big_sepL2_alt</span></a>. <span class="id" title="var">iDestruct</span> "Ht" <span class="id" title="keyword">as</span> "[%Hlen _]". <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#lookup_lt_Some"><span class="id" title="lemma">lookup_lt_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlook</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlen</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#lookup_lt_is_Some_2"><span class="id" title="lemma">lookup_lt_is_Some_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlook</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlook2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlook</span> <span class="id" title="keyword">as</span> [? ?]. <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_lookup_acc"><span class="id" title="lemma">big_sepL2_lookup_acc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Ht"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[Ht ?]"; [<span class="id" title="tactic">try</span> <span class="id" title="var">done</span>..|].<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wp_not_stuck"><span class="id" title="lemma">wp_not_stuck</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hσ Ht"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#adequacy"><span class="id" title="section">adequacy</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab98"></a><h1 class="section">ALL RESULTS BELOW ARE TIED SPECIFICALLY TO <span class="inlinecode"><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a></span></h1>

</div>
<div class="code">
<span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.base_logic.html#uPred"><span class="id" title="module">uPred</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="wp_progress_gen" class="idref" href="#wp_progress_gen"><span class="id" title="lemma">wp_progress_gen</span></a> <a id="cfef01e03494c5eba8f86f1492cd95f1" class="idref" href="#cfef01e03494c5eba8f86f1492cd95f1"><span class="id" title="binder">Σ</span></a> <a id="f6115e7966eeba4ec0c5950ce0a38ef4" class="idref" href="#f6115e7966eeba4ec0c5950ce0a38ef4"><span class="id" title="binder">Λ</span></a> `{<a id="invGpreS0:84" class="idref" href="#invGpreS0:84"><span class="id" title="binder">!</span></a><a id="invGpreS0:84" class="idref" href="#invGpreS0:84"><span class="id" title="binder">invGpreS</span></a> <a id="invGpreS0:84" class="idref" href="#invGpreS0:84"><span class="id" title="binder">Σ</span></a>} <a id="es:85" class="idref" href="#es:85"><span class="id" title="binder">es</span></a> <a id="c59c10859267eab7c93c00eb2abff0a0" class="idref" href="#c59c10859267eab7c93c00eb2abff0a0"><span class="id" title="binder">σ1</span></a> <a id="n:87" class="idref" href="#n:87"><span class="id" title="binder">n</span></a> <a id="aa72a3da4ccc0562062b7518b9f4f560" class="idref" href="#aa72a3da4ccc0562062b7518b9f4f560"><span class="id" title="binder">κs</span></a> <a id="t2:89" class="idref" href="#t2:89"><span class="id" title="binder">t2</span></a> <a id="acca1376499495666878bf6c9b671809" class="idref" href="#acca1376499495666878bf6c9b671809"><span class="id" title="binder">σ2</span></a> <a id="e2:91" class="idref" href="#e2:91"><span class="id" title="binder">e2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="num_laters_per_step:92" class="idref" href="#num_laters_per_step:92"><span class="id" title="binder">num_laters_per_step</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="notation">→</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)  :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <span class="id" title="notation">`{</span><a id="Hinv:93" class="idref" href="#Hinv:93"><span class="id" title="binder">Hinv</span></a> : !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.fancy_updates.html#invGS_gen"><span class="id" title="class">invGS_gen</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.fancy_updates.html#HasNoLc"><span class="id" title="constructor">HasNoLc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#cfef01e03494c5eba8f86f1492cd95f1"><span class="id" title="variable">Σ</span></a><span class="id" title="notation">},</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">(</span></a><a id="stateI:94" class="idref" href="#stateI:94"><span class="id" title="binder">stateI</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#f6115e7966eeba4ec0c5950ce0a38ef4"><span class="id" title="variable">Λ</span></a> <span class="id" title="notation">→</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="notation">→</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#observation"><span class="id" title="projection">observation</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#f6115e7966eeba4ec0c5950ce0a38ef4"><span class="id" title="variable">Λ</span></a>) <span class="id" title="notation">→</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="notation">→</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#cfef01e03494c5eba8f86f1492cd95f1"><span class="id" title="variable">Σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e3187da1a73e24afa4031eb8e873d0ed" class="idref" href="#e3187da1a73e24afa4031eb8e873d0ed"><span class="id" title="binder">Φs</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#f6115e7966eeba4ec0c5950ce0a38ef4"><span class="id" title="variable">Λ</span></a> <span class="id" title="notation">→</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#cfef01e03494c5eba8f86f1492cd95f1"><span class="id" title="variable">Σ</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="fork_post:96" class="idref" href="#fork_post:96"><span class="id" title="binder">fork_post</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#f6115e7966eeba4ec0c5950ce0a38ef4"><span class="id" title="variable">Λ</span></a> <span class="id" title="notation">→</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#cfef01e03494c5eba8f86f1492cd95f1"><span class="id" title="variable">Σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="state_interp_mono:97" class="idref" href="#state_interp_mono:97"><span class="id" title="binder">state_interp_mono</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">_</span> : <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#irisGS_gen"><span class="id" title="class">irisGS_gen</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#f6115e7966eeba4ec0c5950ce0a38ef4"><span class="id" title="variable">Λ</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#cfef01e03494c5eba8f86f1492cd95f1"><span class="id" title="variable">Σ</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#IrisG"><span class="id" title="constructor">IrisG</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#stateI:94"><span class="id" title="variable">stateI</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#fork_post:96"><span class="id" title="variable">fork_post</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#num_laters_per_step:92"><span class="id" title="variable">num_laters_per_step</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#state_interp_mono:97"><span class="id" title="variable">state_interp_mono</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#stateI:94"><span class="id" title="variable">stateI</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#c59c10859267eab7c93c00eb2abff0a0"><span class="id" title="variable">σ1</span></a> 0 <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#aa72a3da4ccc0562062b7518b9f4f560"><span class="id" title="variable">κs</span></a> 0 <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">]</span></a> <a id="e:98" class="idref" href="#e:98"><span class="id" title="binder"><span id="e:99" class="id">e</span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">;</span></a><a id="ba9644d1d3fd74f247771a7b51c94638" class="idref" href="#ba9644d1d3fd74f247771a7b51c94638"><span class="id" title="binder"><span id="6138a8b5f68a31f0fdeef314552b73c5" class="id">Φ</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es:85"><span class="id" title="variable">es</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">;</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e3187da1a73e24afa4031eb8e873d0ed"><span class="id" title="variable">Φs</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#39a54b91940b65ff571dbecc078086e5"><span class="id" title="notation">WP</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e:98"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#39a54b91940b65ff571dbecc078086e5"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#39a54b91940b65ff571dbecc078086e5"><span class="id" title="notation">{{</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ba9644d1d3fd74f247771a7b51c94638"><span class="id" title="variable">Φ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#39a54b91940b65ff571dbecc078086e5"><span class="id" title="notation">}}</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#nsteps"><span class="id" title="inductive">nsteps</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#n:87"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es:85"><span class="id" title="variable">es</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#c59c10859267eab7c93c00eb2abff0a0"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#aa72a3da4ccc0562062b7518b9f4f560"><span class="id" title="variable">κs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#t2:89"><span class="id" title="variable">t2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#acca1376499495666878bf6c9b671809"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e2:91"><span class="id" title="variable">e2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#t2:89"><span class="id" title="variable">t2</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#not_stuck"><span class="id" title="definition">not_stuck</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e2:91"><span class="id" title="variable">e2</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#acca1376499495666878bf6c9b671809"><span class="id" title="variable">σ2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hwp</span> ??).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.bi.html#uPred.pure_soundness"><span class="id" title="lemma">pure_soundness</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.fancy_updates.html#step_fupdN_soundness_gen"><span class="id" title="lemma">step_fupdN_soundness_gen</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.fancy_updates.html#HasNoLc"><span class="id" title="constructor">HasNoLc</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#steps_sum"><span class="id" title="definition">steps_sum</span></a> <span class="id" title="var">num_laters_per_step</span> 0 <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#steps_sum"><span class="id" title="definition">steps_sum</span></a> <span class="id" title="var">num_laters_per_step</span> 0 <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hinv</span>) "Hcred".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="var">Hwp</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">stateI</span> <span class="id" title="var">Φ</span> <span class="id" title="var">fork_post</span> <span class="id" title="var">state_interp_mono</span>) "(Hσ &amp; Hwp)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_length"><span class="id" title="lemma">big_sepL2_length</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hwp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlen1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>@<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wptp_progress"><span class="id" title="lemma">wptp_progress</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#IrisG"><span class="id" title="constructor">IrisG</span></a> <span class="id" title="var">stateI</span> <span class="id" title="var">fork_post</span> <span class="id" title="var">num_laters_per_step</span> <span class="id" title="var">state_interp_mono</span>) <span class="id" title="var">_</span> <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[Hσ] Hwp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "H"; [<span class="id" title="var">done</span>| <span class="id" title="var">done</span> |<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#right_id_L"><span class="id" title="lemma">right_id_L</span></a>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">}▷=&gt;^(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#steps_sum"><span class="id" title="definition">steps_sum</span></a> <span class="id" title="var">num_laters_per_step</span> 0 <span class="id" title="var">n</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#not_stuck"><span class="id" title="definition">not_stuck</span></a> <span class="id" title="var">e2</span> σ2<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> "[-]" <span class="id" title="keyword">as</span> "H"; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#steps_sum"><span class="id" title="definition">steps_sum</span></a>; [<span class="id" title="var">done</span>|]. <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#step_fupdN_S_fupd"><span class="id" title="lemma">step_fupdN_S_fupd</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#step_fupdN_wand"><span class="id" title="lemma">step_fupdN_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iIntros</span> "$".<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Iris's generic adequacy result 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="wp_strong_adequacy_gen" class="idref" href="#wp_strong_adequacy_gen"><span class="id" title="lemma">wp_strong_adequacy_gen</span></a> <a id="ab1e0b0f726a60ee3c2011f894309cd3" class="idref" href="#ab1e0b0f726a60ee3c2011f894309cd3"><span class="id" title="binder">Σ</span></a> <a id="de38a16e7d9b0c321365925d5606ae0e" class="idref" href="#de38a16e7d9b0c321365925d5606ae0e"><span class="id" title="binder">Λ</span></a> `{<a id="invGpreS0:104" class="idref" href="#invGpreS0:104"><span class="id" title="binder">!</span></a><a id="invGpreS0:104" class="idref" href="#invGpreS0:104"><span class="id" title="binder">invGpreS</span></a> <a id="invGpreS0:104" class="idref" href="#invGpreS0:104"><span class="id" title="binder">Σ</span></a>} <a id="s:105" class="idref" href="#s:105"><span class="id" title="binder">s</span></a> <a id="es:106" class="idref" href="#es:106"><span class="id" title="binder">es</span></a> <a id="7ffde5e1ff780dbccad6c870949c225f" class="idref" href="#7ffde5e1ff780dbccad6c870949c225f"><span class="id" title="binder">σ1</span></a> <a id="n:108" class="idref" href="#n:108"><span class="id" title="binder">n</span></a> <a id="961aee56ca9ca8d852fcdca7466295e1" class="idref" href="#961aee56ca9ca8d852fcdca7466295e1"><span class="id" title="binder">κs</span></a> <a id="t2:110" class="idref" href="#t2:110"><span class="id" title="binder">t2</span></a> <a id="09b40ff62ac41342e14be7a7525fb0a5" class="idref" href="#09b40ff62ac41342e14be7a7525fb0a5"><span class="id" title="binder">σ2</span></a> <a id="6c42375041947e3065ea6167736f6895" class="idref" href="#6c42375041947e3065ea6167736f6895"><span class="id" title="binder">φ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="num_laters_per_step:113" class="idref" href="#num_laters_per_step:113"><span class="id" title="binder">num_laters_per_step</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="notation">→</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;WP&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <span class="id" title="notation">`{</span><a id="Hinv:114" class="idref" href="#Hinv:114"><span class="id" title="binder">Hinv</span></a> : !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.fancy_updates.html#invGS_gen"><span class="id" title="class">invGS_gen</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.fancy_updates.html#HasNoLc"><span class="id" title="constructor">HasNoLc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ab1e0b0f726a60ee3c2011f894309cd3"><span class="id" title="variable">Σ</span></a><span class="id" title="notation">},</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">(</span></a><a id="stateI:115" class="idref" href="#stateI:115"><span class="id" title="binder">stateI</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#de38a16e7d9b0c321365925d5606ae0e"><span class="id" title="variable">Λ</span></a> <span class="id" title="notation">→</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="notation">→</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#observation"><span class="id" title="projection">observation</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#de38a16e7d9b0c321365925d5606ae0e"><span class="id" title="variable">Λ</span></a>) <span class="id" title="notation">→</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="notation">→</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ab1e0b0f726a60ee3c2011f894309cd3"><span class="id" title="variable">Σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="2d102e3d1de50845a8bb5898f2efcb08" class="idref" href="#2d102e3d1de50845a8bb5898f2efcb08"><span class="id" title="binder">Φs</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#de38a16e7d9b0c321365925d5606ae0e"><span class="id" title="variable">Λ</span></a> <span class="id" title="notation">→</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ab1e0b0f726a60ee3c2011f894309cd3"><span class="id" title="variable">Σ</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="fork_post:117" class="idref" href="#fork_post:117"><span class="id" title="binder">fork_post</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#de38a16e7d9b0c321365925d5606ae0e"><span class="id" title="variable">Λ</span></a> <span class="id" title="notation">→</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ab1e0b0f726a60ee3c2011f894309cd3"><span class="id" title="variable">Σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Note:&nbsp;existentially&nbsp;quantifying&nbsp;over&nbsp;Iris&nbsp;goal!&nbsp;<span class="inlinecode"><span class="id" title="var">iExists</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span>&nbsp;should<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;usually&nbsp;work.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="state_interp_mono:118" class="idref" href="#state_interp_mono:118"><span class="id" title="binder">state_interp_mono</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">_</span> : <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#irisGS_gen"><span class="id" title="class">irisGS_gen</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#de38a16e7d9b0c321365925d5606ae0e"><span class="id" title="variable">Λ</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#ab1e0b0f726a60ee3c2011f894309cd3"><span class="id" title="variable">Σ</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#IrisG"><span class="id" title="constructor">IrisG</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#stateI:115"><span class="id" title="variable">stateI</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#fork_post:117"><span class="id" title="variable">fork_post</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#num_laters_per_step:113"><span class="id" title="variable">num_laters_per_step</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#state_interp_mono:118"><span class="id" title="variable">state_interp_mono</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#stateI:115"><span class="id" title="variable">stateI</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#7ffde5e1ff780dbccad6c870949c225f"><span class="id" title="variable">σ1</span></a> 0 <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#961aee56ca9ca8d852fcdca7466295e1"><span class="id" title="variable">κs</span></a> 0 <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">]</span></a> <a id="e:119" class="idref" href="#e:119"><span class="id" title="binder"><span id="e:120" class="id">e</span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">;</span></a><a id="c476930de6a9b03f4cd43a8cdb7bad9b" class="idref" href="#c476930de6a9b03f4cd43a8cdb7bad9b"><span class="id" title="binder"><span id="5c02abfd780d1041e9c87909c1e47e0d" class="id">Φ</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es:106"><span class="id" title="variable">es</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">;</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#2d102e3d1de50845a8bb5898f2efcb08"><span class="id" title="variable">Φs</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">WP</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e:119"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">@</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#s:105"><span class="id" title="variable">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">{{</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#c476930de6a9b03f4cd43a8cdb7bad9b"><span class="id" title="variable">Φ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">}}</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a id="es':123" class="idref" href="#es':123"><span class="id" title="binder">es'</span></a> <a id="t2':124" class="idref" href="#t2':124"><span class="id" title="binder">t2'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;es'&nbsp;is&nbsp;the&nbsp;final&nbsp;state&nbsp;of&nbsp;the&nbsp;initial&nbsp;threads,&nbsp;t2'&nbsp;the&nbsp;rest&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#t2:110"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es':123"><span class="id" title="variable">es'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#t2':124"><span class="id" title="variable">t2'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;es'&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;initial&nbsp;threads&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es':123"><span class="id" title="variable">es'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es:106"><span class="id" title="variable">es</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;this&nbsp;is&nbsp;a&nbsp;stuck-free&nbsp;triple&nbsp;(i.e.&nbsp;<span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">NotStuck</span></span>),&nbsp;then&nbsp;all<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;threads&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">t2</span></span>&nbsp;are&nbsp;not&nbsp;stuck&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <span class="id" title="notation">∀</span> <a id="e2:125" class="idref" href="#e2:125"><span class="id" title="binder">e2</span></a><span class="id" title="notation">,</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#s:105"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#NotStuck"><span class="id" title="constructor">NotStuck</span></a> <span class="id" title="notation">→</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e2:125"><span class="id" title="variable">e2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#t2:110"><span class="id" title="variable">t2</span></a> <span class="id" title="notation">→</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#not_stuck"><span class="id" title="definition">not_stuck</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e2:125"><span class="id" title="variable">e2</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#09b40ff62ac41342e14be7a7525fb0a5"><span class="id" title="variable">σ2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;state&nbsp;interpretation&nbsp;holds&nbsp;for&nbsp;<span class="inlinecode">σ2</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#stateI:115"><span class="id" title="variable">stateI</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#09b40ff62ac41342e14be7a7525fb0a5"><span class="id" title="variable">σ2</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#n:108"><span class="id" title="variable">n</span></a> <span class="id" title="notation">[]</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#t2':124"><span class="id" title="variable">t2'</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;the&nbsp;initial&nbsp;threads&nbsp;are&nbsp;done,&nbsp;their&nbsp;post-condition&nbsp;<span class="inlinecode"><span class="id" title="var">Φ</span></span>&nbsp;holds&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">]</span></a> <a id="e:126" class="idref" href="#e:126"><span class="id" title="binder"><span id="e:127" class="id">e</span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">;</span></a><a id="5e293e780c2f43456421c215a1622d87" class="idref" href="#5e293e780c2f43456421c215a1622d87"><span class="id" title="binder"><span id="c5503415fc337d8675c743b8e8984884" class="id">Φ</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">∈</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es':123"><span class="id" title="variable">es'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">;</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#2d102e3d1de50845a8bb5898f2efcb08"><span class="id" title="variable">Φs</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#6be5f9c6601d6c7f57ad52228a87ebe3"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#from_option"><span class="id" title="definition">from_option</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#5e293e780c2f43456421c215a1622d87"><span class="id" title="variable">Φ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'True'"><span class="id" title="notation">True</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e:126"><span class="id" title="variable">e</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;For&nbsp;all&nbsp;forked-off&nbsp;threads&nbsp;that&nbsp;are&nbsp;done,&nbsp;their&nbsp;postcondition<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">fork_post</span></span>&nbsp;holds.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">]</span></a> <a id="v:130" class="idref" href="#v:130"><span class="id" title="binder"><span id="v:131" class="id">v</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#omap"><span class="id" title="definition">omap</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#t2':124"><span class="id" title="variable">t2'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#fork_post:117"><span class="id" title="variable">fork_post</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#v:130"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Under&nbsp;all&nbsp;these&nbsp;assumptions,&nbsp;and&nbsp;while&nbsp;opening&nbsp;all&nbsp;invariants,&nbsp;we<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;can&nbsp;conclude&nbsp;<span class="inlinecode">φ</span>&nbsp;in&nbsp;the&nbsp;logic.&nbsp;After&nbsp;opening&nbsp;all&nbsp;required&nbsp;invariants,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;one&nbsp;can&nbsp;use&nbsp;<span class="inlinecode"><span class="id" title="var">fupd_mask_subseteq</span></span>&nbsp;to&nbsp;introduce&nbsp;the&nbsp;fancy&nbsp;update.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#6c42375041947e3065ea6167736f6895"><span class="id" title="variable">φ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#nsteps"><span class="id" title="inductive">nsteps</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#n:108"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#es:106"><span class="id" title="variable">es</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#7ffde5e1ff780dbccad6c870949c225f"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#961aee56ca9ca8d852fcdca7466295e1"><span class="id" title="variable">κs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#t2:110"><span class="id" title="variable">t2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#09b40ff62ac41342e14be7a7525fb0a5"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Then&nbsp;we&nbsp;can&nbsp;conclude&nbsp;<span class="inlinecode">φ</span>&nbsp;at&nbsp;the&nbsp;meta-level.&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#6c42375041947e3065ea6167736f6895"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hwp</span> ?).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.bi.html#uPred.pure_soundness"><span class="id" title="lemma">pure_soundness</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.fancy_updates.html#step_fupdN_soundness_gen"><span class="id" title="lemma">step_fupdN_soundness_gen</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.fancy_updates.html#HasNoLc"><span class="id" title="constructor">HasNoLc</span></a> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#steps_sum"><span class="id" title="definition">steps_sum</span></a> <span class="id" title="var">num_laters_per_step</span> 0 <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#steps_sum"><span class="id" title="definition">steps_sum</span></a> <span class="id" title="var">num_laters_per_step</span> 0 <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hinv</span>) "Hcred".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="var">Hwp</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">stateI</span> <span class="id" title="var">Φ</span> <span class="id" title="var">fork_post</span> <span class="id" title="var">state_interp_mono</span>) "(Hσ &amp; Hwp &amp; Hφ)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_length"><span class="id" title="lemma">big_sepL2_length</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hwp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlen1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>@<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wptp_postconditions"><span class="id" title="lemma">wptp_postconditions</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#IrisG"><span class="id" title="constructor">IrisG</span></a> <span class="id" title="var">stateI</span> <span class="id" title="var">fork_post</span> <span class="id" title="var">num_laters_per_step</span> <span class="id" title="var">state_interp_mono</span>) <span class="id" title="var">_</span> <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[Hσ] Hwp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "H"; [<span class="id" title="var">done</span>|<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#right_id_L"><span class="id" title="lemma">right_id_L</span></a>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">}▷=&gt;^(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#steps_sum"><span class="id" title="definition">steps_sum</span></a> <span class="id" title="var">num_laters_per_step</span> 0 <span class="id" title="var">n</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#a435ff18956eb8117c8db3cebdde7f9f"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a>φ<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> "[-]" <span class="id" title="keyword">as</span> "H"; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#steps_sum"><span class="id" title="definition">steps_sum</span></a>; [<span class="id" title="var">done</span>|]. <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#step_fupdN_S_fupd"><span class="id" title="lemma">step_fupdN_S_fupd</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#step_fupdN_wand"><span class="id" title="lemma">step_fupdN_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">nt'</span>) "(Hσ &amp; Hval) /=".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_app_inv_r"><span class="id" title="lemma">big_sepL2_app_inv_r</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hval"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">es'</span> <span class="id" title="var">t2'</span> -&gt;) "[Hes' Ht2']".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_length"><span class="id" title="lemma">big_sepL2_length</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Ht2'"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlen2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#length_replicate"><span class="id" title="lemma">length_replicate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlen2</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_length"><span class="id" title="lemma">big_sepL2_length</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hes'"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlen3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Peano.html#plus_n_O"><span class="id" title="lemma">plus_n_O</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hφ" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[//] [%] [ ] Hσ Hes'"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;FIXME:&nbsp;Different&nbsp;implicit&nbsp;types&nbsp;for&nbsp;<span class="inlinecode"><span class="id" title="var">length</span></span>&nbsp;are&nbsp;inferred,&nbsp;so&nbsp;<span class="inlinecode"><span class="id" title="var">lia</span></span>&nbsp;and<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="tactic">congruence</span></span>&nbsp;do&nbsp;not&nbsp;work&nbsp;due&nbsp;to&nbsp;https://github.com/coq/coq/issues/16634&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlen1</span> <span class="id" title="var">Hlen3</span>| |]; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_replicate_r"><span class="id" title="lemma">big_sepL2_replicate_r</span></a> // <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL_omap"><span class="id" title="lemma">big_sepL_omap</span></a>. }<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;At&nbsp;this&nbsp;point&nbsp;in&nbsp;the&nbsp;adequacy&nbsp;proof,&nbsp;we&nbsp;use&nbsp;a&nbsp;trick:&nbsp;we&nbsp;effectively&nbsp;run&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;user-provided&nbsp;WP&nbsp;proof&nbsp;again&nbsp;(i.e.,&nbsp;instantiate&nbsp;the&nbsp;`invGS_gen`&nbsp;and&nbsp;execute&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;program)&nbsp;by&nbsp;using&nbsp;the&nbsp;lemma&nbsp;<span class="inlinecode"><span class="id" title="var">wp_progress_gen</span></span>.&nbsp;In&nbsp;doing&nbsp;so,&nbsp;we&nbsp;can&nbsp;obtain<br/>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;progress&nbsp;part&nbsp;of&nbsp;the&nbsp;adequacy&nbsp;theorem.<br/>
&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">e2</span> -&gt; <span class="id" title="var">Hel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wp_progress_gen"><span class="id" title="lemma">wp_progress_gen</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="var">done</span> | <span class="id" title="tactic">clear</span> <span class="id" title="var">stateI</span> <span class="id" title="var">Φ</span> <span class="id" title="var">fork_post</span> <span class="id" title="var">state_interp_mono</span> <span class="id" title="var">Hlen1</span> <span class="id" title="var">Hlen3</span> | <span class="id" title="var">done</span>|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?).<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="var">Hwp</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">stateI</span> <span class="id" title="var">Φ</span> <span class="id" title="var">fork_post</span> <span class="id" title="var">state_interp_mono</span>) "(Hσ &amp; Hwp &amp; Hφ)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This simpler form of adequacy requires the <span class="inlinecode"><span class="id" title="var">irisGS</span></span> instance that you use
everywhere to syntactically be of the form
{|
  iris_invGS := ...;
  state_interp σ _ κs _ := ...;
  fork_post v := ...;
  num_laters_per_step _ := 0;
  state_interp_mono _    := fupd_intro _ ;
|}
In other words, the state interpretation must ignore <span class="inlinecode"><span class="id" title="var">ns</span></span> and <span class="inlinecode"><span class="id" title="var">nt</span></span>, the number
of laters per step must be 0, and the proof of <span class="inlinecode"><a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#state_interp_mono"><span class="id" title="projection">state_interp_mono</span></a></span> must have
this specific proof term.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="wp_adequacy_gen" class="idref" href="#wp_adequacy_gen"><span class="id" title="lemma">wp_adequacy_gen</span></a> <a id="7d336dd4e557e810b25dfc202ccf219e" class="idref" href="#7d336dd4e557e810b25dfc202ccf219e"><span class="id" title="binder">Σ</span></a> <a id="48af35c6b5237674fa5a8bf91e153f93" class="idref" href="#48af35c6b5237674fa5a8bf91e153f93"><span class="id" title="binder">Λ</span></a> `{<a id="invGpreS0:134" class="idref" href="#invGpreS0:134"><span class="id" title="binder">!</span></a><a id="invGpreS0:134" class="idref" href="#invGpreS0:134"><span class="id" title="binder">invGpreS</span></a> <a id="invGpreS0:134" class="idref" href="#invGpreS0:134"><span class="id" title="binder">Σ</span></a>} <a id="s:135" class="idref" href="#s:135"><span class="id" title="binder">s</span></a> <a id="e:136" class="idref" href="#e:136"><span class="id" title="binder">e</span></a> <a id="e4fbd6eefaac316017f905346a652e07" class="idref" href="#e4fbd6eefaac316017f905346a652e07"><span class="id" title="binder">σ</span></a> <a id="f681d02708c2759d6ad7ee493464dedc" class="idref" href="#f681d02708c2759d6ad7ee493464dedc"><span class="id" title="binder">φ</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <span class="id" title="notation">`{</span><a id="Hinv:139" class="idref" href="#Hinv:139"><span class="id" title="binder">Hinv</span></a> : !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.fancy_updates.html#invGS_gen"><span class="id" title="class">invGS_gen</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.fancy_updates.html#HasNoLc"><span class="id" title="constructor">HasNoLc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#7d336dd4e557e810b25dfc202ccf219e"><span class="id" title="variable">Σ</span></a>} <a id="c0f828785c8cb8ea5bf6345756e6f128" class="idref" href="#c0f828785c8cb8ea5bf6345756e6f128"><span class="id" title="binder">κs</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">(</span></a><a id="stateI:141" class="idref" href="#stateI:141"><span class="id" title="binder">stateI</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#48af35c6b5237674fa5a8bf91e153f93"><span class="id" title="variable">Λ</span></a> <span class="id" title="notation">→</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#observation"><span class="id" title="projection">observation</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#48af35c6b5237674fa5a8bf91e153f93"><span class="id" title="variable">Λ</span></a>) <span class="id" title="notation">→</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#7d336dd4e557e810b25dfc202ccf219e"><span class="id" title="variable">Σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="fork_post:142" class="idref" href="#fork_post:142"><span class="id" title="binder">fork_post</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#48af35c6b5237674fa5a8bf91e153f93"><span class="id" title="variable">Λ</span></a> <span class="id" title="notation">→</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#7d336dd4e557e810b25dfc202ccf219e"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">_</span> : <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#irisGS_gen"><span class="id" title="class">irisGS_gen</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#48af35c6b5237674fa5a8bf91e153f93"><span class="id" title="variable">Λ</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#7d336dd4e557e810b25dfc202ccf219e"><span class="id" title="variable">Σ</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#IrisG"><span class="id" title="constructor">IrisG</span></a> (<span class="id" title="notation">λ</span> <a id="df10cf42e516fb5c8df55a8b58cb7d95" class="idref" href="#df10cf42e516fb5c8df55a8b58cb7d95"><span class="id" title="binder">σ</span></a> <span class="id" title="var">_</span> <a id="79d9ec59ba9bbf7238726ed5a17fbb09" class="idref" href="#79d9ec59ba9bbf7238726ed5a17fbb09"><span class="id" title="binder">κs</span></a> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#stateI:141"><span class="id" title="variable">stateI</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#df10cf42e516fb5c8df55a8b58cb7d95"><span class="id" title="variable">σ</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#79d9ec59ba9bbf7238726ed5a17fbb09"><span class="id" title="variable">κs</span></a>) <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#fork_post:142"><span class="id" title="variable">fork_post</span></a> (<span class="id" title="notation">λ</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> 0) (<span class="id" title="notation">λ</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_intro"><span class="id" title="lemma">fupd_intro</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#stateI:141"><span class="id" title="variable">stateI</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e4fbd6eefaac316017f905346a652e07"><span class="id" title="variable">σ</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#c0f828785c8cb8ea5bf6345756e6f128"><span class="id" title="variable">κs</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#eee60bb71eb20943eabf98b71ebd06b9"><span class="id" title="notation">WP</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e:136"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#eee60bb71eb20943eabf98b71ebd06b9"><span class="id" title="notation">@</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#s:135"><span class="id" title="variable">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#eee60bb71eb20943eabf98b71ebd06b9"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#eee60bb71eb20943eabf98b71ebd06b9"><span class="id" title="notation">{{</span></a> <a id="v:145" class="idref" href="#v:145"><span class="id" title="binder">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#eee60bb71eb20943eabf98b71ebd06b9"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#f681d02708c2759d6ad7ee493464dedc"><span class="id" title="variable">φ</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#v:145"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#eee60bb71eb20943eabf98b71ebd06b9"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.adequacy.html#adequate"><span class="id" title="record">adequate</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#s:135"><span class="id" title="variable">s</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e:136"><span class="id" title="variable">e</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e4fbd6eefaac316017f905346a652e07"><span class="id" title="variable">σ</span></a> (<span class="id" title="notation">λ</span> <a id="v:146" class="idref" href="#v:146"><span class="id" title="binder">v</span></a> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#f681d02708c2759d6ad7ee493464dedc"><span class="id" title="variable">φ</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#v:146"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hwp</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.adequacy.html#adequate_alt"><span class="id" title="lemma">adequate_alt</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">t2</span> σ2 [<span class="id" title="var">n</span> [<span class="id" title="var">κs</span> ?]]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#erased_steps_nsteps"><span class="id" title="lemma">erased_steps_nsteps</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wp_strong_adequacy_gen"><span class="id" title="lemma">wp_strong_adequacy_gen</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">_</span>); [ | <span class="id" title="var">done</span>]=&gt; ?.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="var">Hwp</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">stateI</span> <span class="id" title="var">fork_post</span>) "[Hσ Hwp]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="notation">λ</span> <a id="06d41dcb34aba9ed41f4c6448cdbe741" class="idref" href="#06d41dcb34aba9ed41f4c6448cdbe741"><span class="id" title="binder"><span id="0e19969fa1ead7e447acde14fa35aafb" class="id">σ</span></span></a> <span class="id" title="var">_</span> <a id="345ed43db0c0decdb69c16e39be27f3f" class="idref" href="#345ed43db0c0decdb69c16e39be27f3f"><span class="id" title="binder"><span id="60288a315a9f150f0935f4a45d39f0b9" class="id">κs</span></span></a> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <span class="id" title="var">stateI</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#06d41dcb34aba9ed41f4c6448cdbe741"><span class="id" title="variable">σ</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#345ed43db0c0decdb69c16e39be27f3f"><span class="id" title="variable">κs</span></a>), <span class="id" title="notation">[(</span><span class="id" title="notation">λ</span> <a id="v:149" class="idref" href="#v:149"><span class="id" title="binder"><span id="v:152" class="id">v</span></span></a><span class="id" title="notation">,</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a>φ <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#v:149"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>%<span class="id" title="var">I</span><span class="id" title="notation">)]</span>, <span class="id" title="var">fork_post</span>, <span class="id" title="var">_</span> =&gt; /=.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "{$Hσ $Hwp} !&gt;" (<span class="id" title="var">e2</span> <span class="id" title="var">t2'</span> -&gt; ? ?) "_ H _".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_intro_discard"><span class="id" title="lemma">fupd_mask_intro_discard</span></a>; [<span class="id" title="var">done</span>|]. <span class="id" title="var">iSplit</span>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_cons_inv_r"><span class="id" title="lemma">big_sepL2_cons_inv_r</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">e'</span> ? -&gt;) "[Hwp H]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_nil_inv_r"><span class="id" title="lemma">big_sepL2_nil_inv_r</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %-&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v2</span> <span class="id" title="var">t2''</span> [= -&gt; &lt;-]). <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#to_of_val"><span class="id" title="lemma">to_of_val</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wp_invariance_gen" class="idref" href="#wp_invariance_gen"><span class="id" title="lemma">wp_invariance_gen</span></a> <a id="7a945b9afea37aaa6ce61e5e6cdd6206" class="idref" href="#7a945b9afea37aaa6ce61e5e6cdd6206"><span class="id" title="binder">Σ</span></a> <a id="6393443d3b79a75c6b1c2c9f7c2dee8d" class="idref" href="#6393443d3b79a75c6b1c2c9f7c2dee8d"><span class="id" title="binder">Λ</span></a> `{<a id="invGpreS0:155" class="idref" href="#invGpreS0:155"><span class="id" title="binder">!</span></a><a id="invGpreS0:155" class="idref" href="#invGpreS0:155"><span class="id" title="binder">invGpreS</span></a> <a id="invGpreS0:155" class="idref" href="#invGpreS0:155"><span class="id" title="binder">Σ</span></a>} <a id="s:156" class="idref" href="#s:156"><span class="id" title="binder">s</span></a> <a id="e1:157" class="idref" href="#e1:157"><span class="id" title="binder">e1</span></a> <a id="5bf702a8e0fb6021f6cf809e70cc6b79" class="idref" href="#5bf702a8e0fb6021f6cf809e70cc6b79"><span class="id" title="binder">σ1</span></a> <a id="t2:159" class="idref" href="#t2:159"><span class="id" title="binder">t2</span></a> <a id="39612c865a6fda6020ae281d248e7655" class="idref" href="#39612c865a6fda6020ae281d248e7655"><span class="id" title="binder">σ2</span></a> <a id="3aeabcdef85378301bd7dac2876ce8f8" class="idref" href="#3aeabcdef85378301bd7dac2876ce8f8"><span class="id" title="binder">φ</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <span class="id" title="notation">`{</span><a id="Hinv:162" class="idref" href="#Hinv:162"><span class="id" title="binder">Hinv</span></a> : !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.fancy_updates.html#invGS_gen"><span class="id" title="class">invGS_gen</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.fancy_updates.html#HasNoLc"><span class="id" title="constructor">HasNoLc</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#7a945b9afea37aaa6ce61e5e6cdd6206"><span class="id" title="variable">Σ</span></a>} <a id="67a46213d628fe16b757cbb8feb04292" class="idref" href="#67a46213d628fe16b757cbb8feb04292"><span class="id" title="binder">κs</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">(</span></a><a id="stateI:164" class="idref" href="#stateI:164"><span class="id" title="binder">stateI</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#6393443d3b79a75c6b1c2c9f7c2dee8d"><span class="id" title="variable">Λ</span></a> <span class="id" title="notation">→</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#observation"><span class="id" title="projection">observation</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#6393443d3b79a75c6b1c2c9f7c2dee8d"><span class="id" title="variable">Λ</span></a>) <span class="id" title="notation">→</span> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="notation">→</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#7a945b9afea37aaa6ce61e5e6cdd6206"><span class="id" title="variable">Σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="fork_post:165" class="idref" href="#fork_post:165"><span class="id" title="binder">fork_post</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#6393443d3b79a75c6b1c2c9f7c2dee8d"><span class="id" title="variable">Λ</span></a> <span class="id" title="notation">→</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#7a945b9afea37aaa6ce61e5e6cdd6206"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">_</span> : <a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#irisGS_gen"><span class="id" title="class">irisGS_gen</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#6393443d3b79a75c6b1c2c9f7c2dee8d"><span class="id" title="variable">Λ</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#7a945b9afea37aaa6ce61e5e6cdd6206"><span class="id" title="variable">Σ</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.ghost.html#IrisG"><span class="id" title="constructor">IrisG</span></a> (<span class="id" title="notation">λ</span> <a id="a761a1b4e13a4eea960c98e205c18811" class="idref" href="#a761a1b4e13a4eea960c98e205c18811"><span class="id" title="binder">σ</span></a> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#stateI:164"><span class="id" title="variable">stateI</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#a761a1b4e13a4eea960c98e205c18811"><span class="id" title="variable">σ</span></a>) <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#fork_post:165"><span class="id" title="variable">fork_post</span></a> (<span class="id" title="notation">λ</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> 0) (<span class="id" title="notation">λ</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_intro"><span class="id" title="lemma">fupd_intro</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#stateI:164"><span class="id" title="variable">stateI</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#5bf702a8e0fb6021f6cf809e70cc6b79"><span class="id" title="variable">σ1</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#67a46213d628fe16b757cbb8feb04292"><span class="id" title="variable">κs</span></a> 0 <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#eee60bb71eb20943eabf98b71ebd06b9"><span class="id" title="notation">WP</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e1:157"><span class="id" title="variable">e1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#eee60bb71eb20943eabf98b71ebd06b9"><span class="id" title="notation">@</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#s:156"><span class="id" title="variable">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#eee60bb71eb20943eabf98b71ebd06b9"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#eee60bb71eb20943eabf98b71ebd06b9"><span class="id" title="notation">{{</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#eee60bb71eb20943eabf98b71ebd06b9"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#eee60bb71eb20943eabf98b71ebd06b9"><span class="id" title="notation">}}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#stateI:164"><span class="id" title="variable">stateI</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#39612c865a6fda6020ae281d248e7655"><span class="id" title="variable">σ2</span></a> <span class="id" title="notation">[]</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Peano.html#pred"><span class="id" title="abbreviation">pred</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#t2:159"><span class="id" title="variable">t2</span></a>)) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="E:167" class="idref" href="#E:167"><span class="id" title="binder">E</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">,</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#E:167"><span class="id" title="variable">E</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#3aeabcdef85378301bd7dac2876ce8f8"><span class="id" title="variable">φ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">[</span><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#e1:157"><span class="id" title="variable">e1</span></a><span class="id" title="notation">]</span><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#5bf702a8e0fb6021f6cf809e70cc6b79"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#t2:159"><span class="id" title="variable">t2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#39612c865a6fda6020ae281d248e7655"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.1+alpha/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#3aeabcdef85378301bd7dac2876ce8f8"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hwp</span> [<span class="id" title="var">n</span> [<span class="id" title="var">κs</span> ?]]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#erased_steps_nsteps"><span class="id" title="lemma">erased_steps_nsteps</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#wp_strong_adequacy_gen"><span class="id" title="lemma">wp_strong_adequacy_gen</span></a> <span class="id" title="var">Σ</span>); [<span class="id" title="var">done</span>| |<span class="id" title="var">done</span>]=&gt; ?.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="var">Hwp</span> <span class="id" title="var">_</span> <span class="id" title="var">κs</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">stateI</span> <span class="id" title="var">fork_post</span>) "(Hσ &amp; Hwp &amp; Hφ)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="notation">λ</span> <a id="762c89d0f50a34a6e84e6186c1a7fab4" class="idref" href="#762c89d0f50a34a6e84e6186c1a7fab4"><span class="id" title="binder"><span id="dde5bb14789107ec722c71dc979db6bf" class="id">σ</span></span></a> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <span class="id" title="var">stateI</span> <a class="idref" href="bluerock.iris.extra.wp_io.iris.adequacy.html#762c89d0f50a34a6e84e6186c1a7fab4"><span class="id" title="variable">σ</span></a>), <span class="id" title="notation">[</span>(<span class="id" title="notation">λ</span> <span class="id" title="var">_</span><span class="id" title="notation">,</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'True'"><span class="id" title="notation">True</span></a>)%<span class="id" title="var">I</span><span class="id" title="notation">]</span>, <span class="id" title="var">fork_post</span>, <span class="id" title="var">_</span> =&gt; /=.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "{$Hσ $Hwp} !&gt;" (<span class="id" title="var">e2</span> <span class="id" title="var">t2'</span> -&gt; <span class="id" title="var">_</span> <span class="id" title="var">_</span>) "Hσ H _ /=".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_cons_inv_r"><span class="id" title="lemma">big_sepL2_cons_inv_r</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (? ? -&gt;) "[_ H]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL2_nil_inv_r"><span class="id" title="lemma">big_sepL2_nil_inv_r</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %-&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hφ" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hσ"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">E</span>) "&gt;Hφ".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_mask_intro_discard"><span class="id" title="lemma">fupd_mask_intro_discard</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
<!--
-- Copyright (c) 2020 BlueRock Security, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
